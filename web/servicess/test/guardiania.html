<!DOCTYPE html>
<html lang="it">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Guardiania - Operatore di Sicurezza</title>
  <style>
    body {
      font-family: 'Georgia', 'Segoe UI', serif;
      margin: 0;
      background: linear-gradient(135deg, #181204 0%, #bfa14a 80%, #fffbe6 100%);
      color: #fffbe6;
      min-height: 100vh;
      overflow-x: hidden;
    }
    .lock-menu-container {
      width: 100%;
      display: flex;
      flex-direction: column;
      align-items: center;
      margin-top: 40px;
      margin-bottom: 30px;
      user-select: none;
    }
    .lock-menu-row {
      display: flex;
      flex-direction: row;
      align-items: center;
      justify-content: center;
      width: 100%;
      gap: 18px;
    }
    .lock-menu {
      width: 340px;
      height: 220px;
      background: rgba(34,34,34,0.8);
      border-radius: 30px;
      box-shadow: 0 0 30px #bfa14a99;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      position: relative;
      overflow: hidden;
      text-align: center;
    }
    .lock-menu .menu-item {
      width: 260px;
      height: 54px;
      line-height: 54px;
      font-size: 1.45em;
      color: #bfa14a;
      opacity: 0.5;
      transition: all 0.2s;
      background: none;
      border-radius: 20px;
      font-weight: bold;
      position: relative;
      z-index: 1;
      pointer-events: none;
      text-align: center;
    }
    .lock-menu .menu-item.selected {
      background: #bfa14a;
      color: #181204;
      font-size: 1.5em;
      opacity: 1;
      box-shadow: 0 2px 12px #bfa14a99;
      pointer-events: auto;
      cursor: pointer;
    }
    .lock-menu .menu-item.above, .lock-menu .menu-item.below {
      opacity: 0.8;
      font-size: 1em;
      color: #fffbe6;
    }
    .lock-menu .menu-item.far {
      opacity: 0.3;
      font-size: 0.9em;
      color: #aaa;
    }
    #leftBtn, #rightBtn {
      background: #bfa14a;
      color: #181204;
      border: none;
      border-radius: 50%;
      width: 64px;
      height: 64px;
      font-size: 2.3em;
      font-weight: bold;
      cursor: pointer;
      box-shadow: 0 2px 10px #bfa14a88;
      transition: background 0.2s, color 0.2s;
      display: flex;
      align-items: center;
      justify-content: center;
    }
    #leftBtn:hover, #rightBtn:hover {
      background: #229ED9;
      color: #fff;
    }
    .guardiania-box {
      background: rgba(34,34,34,0.92);
      border-radius: 24px;
      box-shadow: 0 0 32px #bfa14a99;
      padding: 48px 36px;
      max-width: 540px;
      text-align: center;
      margin: 0 auto 40px auto;
    }
    h1 {
      color: #bfa14a;
      font-size: 2.3em;
      margin-bottom: 24px;
      letter-spacing: 1px;
      font-family: 'Georgia', serif;
    }
    p {
      color: #fffbe6;
      font-size: 1.18em;
      line-height: 1.6;
    }
    label {
      color: #bfa14a;
      font-weight: bold;
      font-size: 1.08em;
    }
    input, textarea {
      background: #181204;
      color: #fffbe6;
      border: 1px solid #bfa14a;
      border-radius: 8px;
      padding: 10px;
      font-size: 1.1em;
      margin-bottom: 18px;
      width: 80%;
      box-shadow: 0 2px 8px #bfa14a22 inset;
      transition: box-shadow 0.2s;
    }
    input:focus, textarea:focus {
      outline: none;
      box-shadow: 0 0 0 2px #bfa14a;
    }
    button[type="submit"] {
      background: #bfa14a;
      color: #181204;
      font-weight: bold;
      padding: 12px 32px;
      border: none;
      border-radius: 18px;
      font-size: 1.2em;
      box-shadow: 0 2px 10px #bfa14a88;
      cursor: pointer;
      transition: background 0.2s, color 0.2s;
    }
    button[type="submit"]:hover {
      background: #229ED9;
      color: #fff;
    }
    #preventivoResult {
      color: #fffbe6;
      background: #181204;
      border: 1px solid #bfa14a;
      border-radius: 12px;
      padding: 18px 12px;
      font-size: 1.1em;
      margin-top: 18px;
      box-shadow: 0 2px 8px #bfa14a33;
    }
    #ibanBox {
      color: #bfa14a;
      font-size: 1.1em;
      font-weight: bold;
      margin-top: 18px;
    }
    .chat-sparkle-container {
      max-width: 420px;
      margin: 36px auto 0 auto;
      background: linear-gradient(135deg, #181204 80%, #bfa14a 120%);
      border-radius: 22px;
      box-shadow: 0 0 32px #bfa14a99, 0 0 0 4px #222 inset;
      padding: 0 0 18px 0;
      display: flex;
      flex-direction: column;
      align-items: stretch;
      position: relative;
      animation: sparkle-glow 2.5s infinite alternate;
    }
    @keyframes sparkle-glow {
      0% { box-shadow: 0 0 32px #bfa14a99, 0 0 0 4px #222 inset; }
      100% { box-shadow: 0 0 48px #bfa14aee, 0 0 0 4px #229ED9 inset; }
    }
    .chat-sparkle-box {
      min-height: 140px;
      max-height: 260px;
      overflow-y: auto;
      padding: 18px 16px 10px 16px;
      font-size: 1em;
      color: #fffbe6;
      background: transparent;
      border-radius: 22px 22px 0 0;
      margin-bottom: 0;
      display: flex;
      flex-direction: column;
      gap: 10px;
    }
    .chat-sparkle-msg {
      display: flex;
      align-items: flex-end;
      gap: 10px;
      margin-bottom: 2px;
      animation: fadeIn 0.5s;
    }
    @keyframes fadeIn {
      from { opacity: 0; transform: translateY(10px); }
      to { opacity: 1; transform: translateY(0); }
    }
    .chat-sparkle-msg.user { justify-content: flex-end; }
    .chat-sparkle-msg.carmela { justify-content: flex-start; }
    .chat-sparkle-bubble {
      padding: 10px 16px;
      border-radius: 18px;
      max-width: 75%;
      word-break: break-word;
      font-size: 1.05em;
      box-shadow: 0 2px 8px #0005;
      background: #bfa14a;
      color: #181204;
      border-bottom-right-radius: 6px;
      border-bottom-left-radius: 18px;
      border-top-left-radius: 18px;
      border-top-right-radius: 18px;
      position: relative;
    }
    .chat-sparkle-msg.carmela .chat-sparkle-bubble {
      background: #181204;
      color: #bfa14a;
      border-bottom-left-radius: 6px;
      border-bottom-right-radius: 18px;
      border-top-left-radius: 18px;
      border-top-right-radius: 18px;
    }
    .chat-sparkle-form {
      display: flex;
      align-items: center;
      gap: 0;
      border-radius: 0 0 22px 22px;
      background: #181204;
      padding: 0 8px 0 8px;
      border-top: 1px solid #bfa14a;
    }
    .chat-sparkle-input {
      border: none;
      border-radius: 0 0 22px 22px;
      padding: 16px 14px;
      font-size: 1.1em;
      outline: none;
      background: #222;
      color: #fffbe6;
      flex: 1;
      margin: 0;
      transition: box-shadow 0.2s;
      box-shadow: 0 2px 8px #bfa14a33 inset;
    }
    .chat-sparkle-input:focus {
      box-shadow: 0 0 0 2px #bfa14a;
    }
    .chat-sparkle-input::placeholder {
      color: #aaa;
    }
    .chat-sparkle-send {
      background: linear-gradient(135deg, #bfa14a 60%, #229ED9 100%);
      color: #181204;
      border: none;
      border-radius: 50%;
      width: 44px;
      height: 44px;
      font-size: 1.5em;
      font-weight: bold;
      cursor: pointer;
      margin-left: 8px;
      box-shadow: 0 2px 10px #bfa14a88;
      display: flex;
      align-items: center;
      justify-content: center;
      transition: background 0.2s, color 0.2s, box-shadow 0.2s;
    }
    .chat-sparkle-send:hover {
      background: linear-gradient(135deg, #229ED9 60%, #bfa14a 100%);
      color: #fff;
      box-shadow: 0 0 16px #229ED9cc;
    }
    @media (max-width: 700px) {
      .lock-menu {
        width: 98vw;
        height: 120px;
      }
      .lock-menu .menu-item {
        width: 98vw;
        height: 36px;
        font-size: 1.1em;
      }
      #leftBtn, #rightBtn {
        width: 44px;
        height: 44px;
        font-size: 1.5em;
      }
      .guardiania-box {
        padding: 18px 4vw;
      }
      .chat-sparkle-container { max-width: 98vw; }
      .chat-sparkle-box { padding: 10px 4px 6px 4px; }
      .chat-sparkle-input { padding: 12px 8px; font-size: 1em; }
      .chat-sparkle-send { width: 36px; height: 36px; font-size: 1.1em; }
    }
  </style>
</head>
<body>
  <!-- Barra bandierine per selezione lingua, visibile anche senza JS -->
  <div class="flag-bar" style="display:flex;gap:8px;justify-content:flex-end;padding:10px 18px 0 0;">
    <button class="flag-btn" data-lang="it" title="Italiano" style="font-size:1.7em;background:none;border:none;cursor:pointer;">ðŸ‡®ðŸ‡¹</button>
    <button class="flag-btn" data-lang="en" title="English" style="font-size:1.7em;background:none;border:none;cursor:pointer;">ðŸ‡¬ðŸ‡§</button>
    <button class="flag-btn" data-lang="fr" title="FranÃ§ais" style="font-size:1.7em;background:none;border:none;cursor:pointer;">ðŸ‡«ðŸ‡·</button>
    <button class="flag-btn" data-lang="de" title="Deutsch" style="font-size:1.7em;background:none;border:none;cursor:pointer;">ðŸ‡©ðŸ‡ª</button>
    <button class="flag-btn" data-lang="es" title="EspaÃ±ol" style="font-size:1.7em;background:none;border:none;cursor:pointer;">ðŸ‡ªðŸ‡¸</button>
    <button class="flag-btn" data-lang="ar" title="Ø§Ù„Ø¹Ø±Ø¨ÙŠØ©" style="font-size:1.7em;background:none;border:none;cursor:pointer;">ðŸ‡¸ðŸ‡¦</button>
    <button class="flag-btn" data-lang="ru" title="Ð ÑƒÑÑÐºÐ¸Ð¹" style="font-size:1.7em;background:none;border:none;cursor:pointer;">ðŸ‡·ðŸ‡º</button>
    <button class="flag-btn" data-lang="zh" title="ä¸­æ–‡" style="font-size:1.7em;background:none;border:none;cursor:pointer;">ðŸ‡¨ðŸ‡³</button>
    <button class="flag-btn" data-lang="ja" title="æ—¥æœ¬èªž" style="font-size:1.7em;background:none;border:none;cursor:pointer;">ðŸ‡¯ðŸ‡µ</button>
    <button class="flag-btn" data-lang="hi" title="à¤¹à¤¿à¤¨à¥à¤¦à¥€" style="font-size:1.7em;background:none;border:none;cursor:pointer;">ðŸ‡®ðŸ‡³</button>
  </div>
  <div class="lock-menu-container">
    <div class="lock-menu-row">
      <button id="leftBtn" aria-label="Precedente">&#9664;</button>
      <div class="lock-menu" id="lockMenu">
        <!-- Menu items will be injected here by JS -->
      </div>
      <button id="rightBtn" aria-label="Successivo">&#9654;</button>
    </div>
  </div>
  <div class="guardiania-box">
    <h1 id="guardiania-title">Guardiania e Vigilanza Disarmata</h1>
    <p id="guardiania-desc">Lâ€™operatore di guardiania e vigilanza disarmata Ã¨ responsabile del monitoraggio attivo delle aree critiche, garantendo la sicurezza di ospedali, discoteche, magazzini e centri commerciali. Con unâ€™attenzione costante agli accessi e alle attivitÃ  sospette, questo professionista utilizza tecnologie avanzate per collaborare con i sistemi di sorveglianza. Ãˆ sempre pronto a intervenire in caso di situazioni critiche, offrendo supporto e assistenza al personale e ai visitatori.</p>
    <form id="preventivoForm" style="margin-top:32px;">
      <label id="guardiania-form-title" for="numPersone" style="display:block;margin-bottom:8px;font-weight:bold;">Numero di operatori richiesti:</label>
      <input type="number" id="numPersone" name="numPersone" min="1" required style="width:80%;padding:10px;margin-bottom:18px;border-radius:8px;border:none;font-size:1.1em;">
      <label id="guardiania-form-place" for="luogo" style="display:block;margin-bottom:8px;font-weight:bold;">Luogo/Area di servizio:</label>
      <input type="text" id="luogo" name="luogo" required style="width:80%;padding:10px;margin-bottom:18px;border-radius:8px;border:none;font-size:1.1em;">
      <label id="guardiania-form-calendar" for="calendario" style="display:block;margin-bottom:8px;font-weight:bold;">Calendario turni (date e orari):</label>
      <textarea id="calendario" name="calendario" rows="3" required style="width:80%;padding:10px;margin-bottom:8px;border-radius:8px;border:none;font-size:1.1em;"></textarea>
      <label id="guardiania-form-phone" for="telefono" style="display:block;margin-bottom:8px;font-weight:bold;">Recapito telefonico (WhatsApp o cellulare):</label>
      <input type="tel" id="telefono" name="telefono" required pattern="[0-9+ ]{7,}" style="width:80%;padding:10px;margin-bottom:18px;border-radius:8px;border:none;font-size:1.1em;">
      <label id="guardiania-form-notes" for="contatti" style="display:block;margin-bottom:8px;font-weight:bold;">Contatti alternativi o note (email, Telegram, preferenze, ecc):</label>
      <textarea id="contatti" name="contatti" rows="2" id="guardiania-form-notes-input" placeholder="Scrivi qui qualsiasi informazione utile per ricontattarti o richieste particolari..." style="width:80%;padding:10px;margin-bottom:18px;border-radius:8px;border:none;font-size:1.1em;"></textarea>
      <div id="guardiania-form-help" style="color:#bfa14a;font-size:0.98em;margin-bottom:18px;">Se hai difficoltÃ  a compilare il calendario, puoi chiedere aiuto a Carmela tramite la chat in basso: ti guiderÃ  passo passo!</div>
      <button type="submit" id="guardiania-form-btn" style="background:#bfa14a;color:#222;font-weight:bold;padding:12px 32px;border:none;border-radius:18px;font-size:1.2em;box-shadow:0 2px 10px #bfa14a88;cursor:pointer;">Genera Preventivo PDF</button>
    </form>
    <div id="preventivoResult" style="margin-top:28px;display:none;"></div>
    <div id="ibanBox" style="margin-top:18px;display:none;font-size:1.1em;color:#bfa14a;font-weight:bold;">IBAN per pagamento: IT00A0000000000000000000000</div>
  </div>
  <div class="chat-sparkle-container">
    <div class="chat-sparkle-box" id="chat-box"></div>
    <form class="chat-sparkle-form" onsubmit="sendMessage(event)">
      <input type="text" id="chat-input" class="chat-sparkle-input" placeholder="Scrivi la tua domanda legale o sulla sicurezza..." autocomplete="off">
      <button type="submit" class="chat-sparkle-send" aria-label="Invia"><span>Invia</span></button>
    </form>
  </div>
  <script>
    // Menu stile "lucchetto a combinazione"
    const menuItems = [
      { label: 'Home', href: 'index.html' },
      { label: 'Guardiania', href: 'guardiania.html' },
      { label: 'Legale', href: 'legale.html' },
      { label: 'Domotica', href: 'domotica.html' },
      { label: 'Criptotelefonia', href: 'https://vpn-gypsy.com/' },
      { label: '7070', href: 'antivirus.html' },
      { label: 'Bonifiche', href: 'bonifiche.html' },
      { label: 'Contatti', href: 'contatti.html' },
      { label: 'Chi siamo', href: 'chisiamo.html' }
    ];
    let selectedIdx = 1;
    const lockMenu = document.getElementById('lockMenu');
    function renderMenu() {
      lockMenu.innerHTML = '';
      for (let i = -2; i <= 2; i++) {
        let idx = (selectedIdx + i + menuItems.length) % menuItems.length;
        let item = document.createElement('a');
        item.className = 'menu-item';
        if (i === 0) item.classList.add('selected');
        else if (Math.abs(i) === 1) item.classList.add(i < 0 ? 'above' : 'below');
        else item.classList.add('far');
        item.href = menuItems[idx].href;
        item.textContent = menuItems[idx].label;
        if (i === 0) item.tabIndex = 0;
        lockMenu.appendChild(item);
      }
    }
    function moveUp() {
      selectedIdx = (selectedIdx - 1 + menuItems.length) % menuItems.length;
      renderMenu();
    }
    function moveDown() {
      selectedIdx = (selectedIdx + 1) % menuItems.length;
      renderMenu();
    }
    document.getElementById('leftBtn').onclick = moveUp;
    document.getElementById('rightBtn').onclick = moveDown;
    document.addEventListener('keydown', e => {
      if (e.key === 'ArrowLeft') { moveUp(); e.preventDefault(); }
      if (e.key === 'ArrowRight') { moveDown(); e.preventDefault(); }
    });
    let touchStartX = null;
    lockMenu.addEventListener('touchstart', e => {
      touchStartX = e.touches[0].clientX;
    });
    lockMenu.addEventListener('touchend', e => {
      if (touchStartX === null) return;
      let deltaX = e.changedTouches[0].clientX - touchStartX;
      if (deltaX < -30) moveDown();
      if (deltaX > 30) moveUp();
      touchStartX = null;
    });
    renderMenu();
    // Chat Carmela professionale con effetto scintilla e API ready
    const chatBox = document.getElementById('chat-box');
    const chatInput = document.getElementById('chat-input');
    const chatForm = document.querySelector('.chat-sparkle-form');
    function appendMsg(text, sender) {
      const msgDiv = document.createElement('div');
      msgDiv.className = 'chat-sparkle-msg ' + sender;
      const bubble = document.createElement('div');
      bubble.className = 'chat-sparkle-bubble';
      bubble.textContent = text;
      msgDiv.appendChild(bubble);
      chatBox.appendChild(msgDiv);
      chatBox.scrollTop = chatBox.scrollHeight;
    }
    async function sendMessage(e) {
      if (e) e.preventDefault();
      const text = chatInput.value.trim();
      if (!text) return;
      appendMsg(text, 'user');
      chatInput.value = '';
      chatInput.focus();
      appendMsg('Carmela sta scrivendo...', 'carmela');
      try {
        const response = await fetch('/chat', {
          method: 'POST',
          headers: { 'Content-Type': 'application/json' },
          body: JSON.stringify({ message: text })
        });
        const data = await response.json();
        chatBox.removeChild(chatBox.lastChild);
        appendMsg(data.reply || 'Errore, riprova piÃ¹ tardi!', 'carmela');
      } catch {
        chatBox.removeChild(chatBox.lastChild);
        appendMsg('Errore di connessione con Carmela.', 'carmela');
      }
    }
    // Traduzione messaggio di benvenuto Carmela
    function guardianiaWelcomeMsg() {
      const lang = localStorage.getItem('lang') || (navigator.language || 'it').slice(0,2).toLowerCase();
  const t = window.translations && window.translations[lang] ? window.translations[lang] : (window.translations && window.translations['it'] ? window.translations['it'] : { guardianiaWelcomeChat: "Benvenuto!" });
      return t.guardianiaWelcomeChat || 'Benvenuto, sono lâ€™Avv. Carmela, consulente legale e direttrice dellâ€™istituto di vigilanza. Come posso aiutarti oggi?';
    }
    appendMsg(guardianiaWelcomeMsg(), 'carmela');
    // Form preventivo con generazione PDF (placeholder, motore da implementare)
    document.getElementById('preventivoForm').onsubmit = async function(e) {
      e.preventDefault();
      const lang = localStorage.getItem('lang') || (navigator.language || 'it').slice(0,2).toLowerCase();
      const t = window.translations && window.translations[lang] ? window.translations[lang] : window.translations['it'];
      const numPersone = document.getElementById('numPersone').value;
      const luogo = document.getElementById('luogo').value;
      const calendario = document.getElementById('calendario').value;
      const oreTotali = 8; // Placeholder, da calcolare dal calendario
      const prezzo = numPersone * oreTotali * 13;
      // Dati minimi per il backend (aggiungi altri campi se vuoi)
      const dati = {
        nome_cliente: '', // puoi aggiungere un campo nome nel form se vuoi
        indirizzo_cliente: luogo,
        cf_cliente: '', // opzionale, aggiungi campo se vuoi
        durata_mesi: '1', // o altro valore
        data_inizio: new Date().toLocaleDateString('it-IT'),
        numero_operatori: numPersone,
        ore_per_operatore: oreTotali,
        tariffa_oraria: 13,
        foro_competente: luogo,
        luogo_data: luogo + ', ' + new Date().toLocaleDateString('it-IT'),
        firma_cliente: '',
        luogo: luogo,
        calendario: calendario
      };
      // Chiamata al backend
      try {
  const response = await fetch('/genera-contratto', {
          method: 'POST',
          headers: { 'Content-Type': 'application/json' },
          body: JSON.stringify(dati)
        });
        if (!response.ok) {
          const errorText = await response.text();
          console.error('Errore generazione contratto:', errorText);
          throw new Error('Errore generazione contratto: ' + errorText);
        }
        const blob = await response.blob();
        const url = window.URL.createObjectURL(blob);
        const a = document.createElement('a');
        a.href = url;
        a.download = `contratto_guardiania_${luogo.replace(/\s+/g,'_')}.html`;
        document.body.appendChild(a);
        a.click();
        a.remove();
        window.URL.revokeObjectURL(url);
        document.getElementById('preventivoResult').style.display = 'block';
        document.getElementById('preventivoResult').innerHTML =
          (t.guardianiaResultOk || '<strong>Contratto generato!</strong><br>Controlla i download per il file.<br>')+
          `${numPersone} ${(t.guardianiaResultPrice||'operatori x ore x 13â‚¬/ora = <span style=\'color:#bfa14a;font-size:1.3em;\'>â‚¬</span>').replace('operatori','operatori').replace('ore','ore').replace('13â‚¬/ora','13â‚¬/ora').replace('â‚¬', prezzo)}`;
        document.getElementById('ibanBox').style.display = 'block';
      } catch (err) {
        console.error('Errore fetch preventivo:', err);
        document.getElementById('preventivoResult').style.display = 'block';
        document.getElementById('preventivoResult').innerHTML = (t.guardianiaResultErr || 'Errore nella generazione del contratto. Riprova.') + '<br><pre style="color:red;">' + err + '</pre>';
      }
    };
  </script>
  <!-- lang.js rimosso: non necessario -->
  <script src="traduzione/guardiania.js"></script>
  <!-- Assicurati che questo script sia caricato PRIMA degli altri script che usano window.translations -->
  <script>
    // Funzione per cambiare lingua e aggiornare i testi
    function setGuardianiaLanguage(lang) {
      localStorage.setItem('lang', lang);
      const t = window.translations && window.translations[lang] ? window.translations[lang] : window.translations['it'];
      // Titolo e descrizione
      document.getElementById('guardiania-title').textContent = {
        it: "Guardiania e Vigilanza Disarmata",
        en: "Unarmed Security and Surveillance",
        fr: "Surveillance et Gardiennage non armÃ©",
        de: "Unbewaffneter Wachdienst",
        es: "GuardianÃ­a y Vigilancia sin armas",
        ar: "Ø§Ù„Ø­Ø±Ø§Ø³Ø© ÙˆØ§Ù„Ù…Ø±Ø§Ù‚Ø¨Ø© Ø¨Ø¯ÙˆÙ† Ø³Ù„Ø§Ø­",
        ru: "ÐžÑ…Ñ€Ð°Ð½Ð° Ð¸ Ð½ÐµÐ²Ð¾Ð¾Ñ€ÑƒÐ¶Ñ‘Ð½Ð½Ð¾Ðµ Ð½Ð°Ð±Ð»ÑŽÐ´ÐµÐ½Ð¸Ðµ",
        zh: "æ— æ­¦è£…å®ˆå«ä¸Žç›‘æŽ§",
        ja: "ç„¡æ­¦è£…ã‚¬ãƒ¼ãƒ‡ã‚£ã‚¢ãƒ³ãƒ»è­¦å‚™",
        hi: "à¤…à¤¸à¤¶à¤¸à¥à¤¤à¥à¤° à¤—à¤¾à¤°à¥à¤¡à¤¿à¤¯à¤¨à¤¿à¤¯à¤¾ à¤”à¤° à¤¨à¤¿à¤—à¤°à¤¾à¤¨à¥€"
      }[lang] || "Guardiania e Vigilanza Disarmata";
      document.getElementById('guardiania-desc').textContent = {
        it: "Lâ€™operatore di guardiania e vigilanza disarmata Ã¨ responsabile del monitoraggio attivo delle aree critiche, garantendo la sicurezza di ospedali, discoteche, magazzini e centri commerciali. Con unâ€™attenzione costante agli accessi e alle attivitÃ  sospette, questo professionista utilizza tecnologie avanzate per collaborare con i sistemi di sorveglianza. Ãˆ sempre pronto a intervenire in caso di situazioni critiche, offrendo supporto e assistenza al personale e ai visitatori.",
        en: "The unarmed security operator is responsible for actively monitoring critical areas, ensuring the safety of hospitals, clubs, warehouses, and shopping centers. With constant attention to access points and suspicious activities, this professional uses advanced technologies to collaborate with surveillance systems. Always ready to intervene in critical situations, providing support and assistance to staff and visitors.",
        fr: "Lâ€™opÃ©rateur de surveillance et de gardiennage non armÃ© est responsable de la surveillance active des zones critiques, garantissant la sÃ©curitÃ© des hÃ´pitaux, discothÃ¨ques, entrepÃ´ts et centres commerciaux. GrÃ¢ce Ã  une attention constante aux accÃ¨s et aux activitÃ©s suspectes, ce professionnel utilise des technologies avancÃ©es pour collaborer avec les systÃ¨mes de surveillance. Il est toujours prÃªt Ã  intervenir en cas de situations critiques, offrant soutien et assistance au personnel et aux visiteurs.",
        de: "Der unbewaffnete Sicherheitsmitarbeiter ist fÃ¼r die aktive Ãœberwachung kritischer Bereiche verantwortlich und gewÃ¤hrleistet die Sicherheit von KrankenhÃ¤usern, Diskotheken, Lagern und Einkaufszentren. Mit stÃ¤ndiger Aufmerksamkeit fÃ¼r ZugÃ¤nge und verdÃ¤chtige AktivitÃ¤ten nutzt dieser Profi fortschrittliche Technologien zur Zusammenarbeit mit Ãœberwachungssystemen. Er ist stets bereit, in kritischen Situationen einzugreifen und Personal sowie Besuchern UnterstÃ¼tzung zu bieten.",
        es: "El operador de guardianÃ­a y vigilancia sin armas es responsable de la monitorizaciÃ³n activa de Ã¡reas crÃ­ticas, garantizando la seguridad de hospitales, discotecas, almacenes y centros comerciales. Con atenciÃ³n constante a los accesos y actividades sospechosas, este profesional utiliza tecnologÃ­as avanzadas para colaborar con los sistemas de vigilancia. Siempre estÃ¡ listo para intervenir en situaciones crÃ­ticas, ofreciendo apoyo y asistencia al personal y visitantes.",
        ar: "Ù…Ø´ØºÙ„ Ø§Ù„Ø­Ø±Ø§Ø³Ø© ÙˆØ§Ù„Ù…Ø±Ø§Ù‚Ø¨Ø© Ø¨Ø¯ÙˆÙ† Ø³Ù„Ø§Ø­ Ù…Ø³Ø¤ÙˆÙ„ Ø¹Ù† Ø§Ù„Ù…Ø±Ø§Ù‚Ø¨Ø© Ø§Ù„Ù†Ø´Ø·Ø© Ù„Ù„Ù…Ù†Ø§Ø·Ù‚ Ø§Ù„Ø­Ø±Ø¬Ø©ØŒ ÙˆØ¶Ù…Ø§Ù† Ø£Ù…Ø§Ù† Ø§Ù„Ù…Ø³ØªØ´ÙÙŠØ§Øª ÙˆØ§Ù„Ù†ÙˆØ§Ø¯ÙŠ ÙˆØ§Ù„Ù…Ø®Ø§Ø²Ù† ÙˆØ§Ù„Ù…Ø±Ø§ÙƒØ² Ø§Ù„ØªØ¬Ø§Ø±ÙŠØ©. Ù…Ø¹ Ø§Ù„Ø§Ù†ØªØ¨Ø§Ù‡ Ø§Ù„Ø¯Ø§Ø¦Ù… Ù„Ù„Ù…Ø¯Ø§Ø®Ù„ ÙˆØ§Ù„Ø£Ù†Ø´Ø·Ø© Ø§Ù„Ù…Ø´Ø¨ÙˆÙ‡Ø©ØŒ ÙŠØ³ØªØ®Ø¯Ù… Ù‡Ø°Ø§ Ø§Ù„Ù…Ø­ØªØ±Ù ØªÙ‚Ù†ÙŠØ§Øª Ù…ØªÙ‚Ø¯Ù…Ø© Ù„Ù„ØªØ¹Ø§ÙˆÙ† Ù…Ø¹ Ø£Ù†Ø¸Ù…Ø© Ø§Ù„Ù…Ø±Ø§Ù‚Ø¨Ø©. ÙˆÙ‡Ùˆ Ø¯Ø§Ø¦Ù…Ù‹Ø§ Ù…Ø³ØªØ¹Ø¯ Ù„Ù„ØªØ¯Ø®Ù„ ÙÙŠ Ø§Ù„Ø­Ø§Ù„Ø§Øª Ø§Ù„Ø­Ø±Ø¬Ø©ØŒ ÙˆØªÙ‚Ø¯ÙŠÙ… Ø§Ù„Ø¯Ø¹Ù… ÙˆØ§Ù„Ù…Ø³Ø§Ø¹Ø¯Ø© Ù„Ù„Ù…ÙˆØ¸ÙÙŠÙ† ÙˆØ§Ù„Ø²ÙˆØ§Ø±.",
        ru: "ÐžÐ¿ÐµÑ€Ð°Ñ‚Ð¾Ñ€ Ð¾Ñ…Ñ€Ð°Ð½Ñ‹ Ð¸ Ð½ÐµÐ²Ð¾Ð¾Ñ€ÑƒÐ¶Ñ‘Ð½Ð½Ð¾Ð³Ð¾ Ð½Ð°Ð±Ð»ÑŽÐ´ÐµÐ½Ð¸Ñ Ð¾Ñ‚Ð²ÐµÑ‡Ð°ÐµÑ‚ Ð·Ð° Ð°ÐºÑ‚Ð¸Ð²Ð½Ñ‹Ð¹ Ð¼Ð¾Ð½Ð¸Ñ‚Ð¾Ñ€Ð¸Ð½Ð³ ÐºÑ€Ð¸Ñ‚Ð¸Ñ‡ÐµÑÐºÐ¸Ñ… Ð·Ð¾Ð½, Ð¾Ð±ÐµÑÐ¿ÐµÑ‡Ð¸Ð²Ð°Ñ Ð±ÐµÐ·Ð¾Ð¿Ð°ÑÐ½Ð¾ÑÑ‚ÑŒ Ð±Ð¾Ð»ÑŒÐ½Ð¸Ñ†, ÐºÐ»ÑƒÐ±Ð¾Ð², ÑÐºÐ»Ð°Ð´Ð¾Ð² Ð¸ Ñ‚Ð¾Ñ€Ð³Ð¾Ð²Ñ‹Ñ… Ñ†ÐµÐ½Ñ‚Ñ€Ð¾Ð². ÐŸÐ¾ÑÑ‚Ð¾ÑÐ½Ð½Ð¾ ÑÐ»ÐµÐ´Ñ Ð·Ð° Ð´Ð¾ÑÑ‚ÑƒÐ¿Ð°Ð¼Ð¸ Ð¸ Ð¿Ð¾Ð´Ð¾Ð·Ñ€Ð¸Ñ‚ÐµÐ»ÑŒÐ½Ð¾Ð¹ Ð°ÐºÑ‚Ð¸Ð²Ð½Ð¾ÑÑ‚ÑŒÑŽ, ÑÑ‚Ð¾Ñ‚ ÑÐ¿ÐµÑ†Ð¸Ð°Ð»Ð¸ÑÑ‚ Ð¸ÑÐ¿Ð¾Ð»ÑŒÐ·ÑƒÐµÑ‚ ÑÐ¾Ð²Ñ€ÐµÐ¼ÐµÐ½Ð½Ñ‹Ðµ Ñ‚ÐµÑ…Ð½Ð¾Ð»Ð¾Ð³Ð¸Ð¸ Ð´Ð»Ñ Ð²Ð·Ð°Ð¸Ð¼Ð¾Ð´ÐµÐ¹ÑÑ‚Ð²Ð¸Ñ Ñ ÑÐ¸ÑÑ‚ÐµÐ¼Ð°Ð¼Ð¸ Ð²Ð¸Ð´ÐµÐ¾Ð½Ð°Ð±Ð»ÑŽÐ´ÐµÐ½Ð¸Ñ. Ð’ÑÐµÐ³Ð´Ð° Ð³Ð¾Ñ‚Ð¾Ð² Ð²Ð¼ÐµÑˆÐ°Ñ‚ÑŒÑÑ Ð² ÐºÑ€Ð¸Ñ‚Ð¸Ñ‡ÐµÑÐºÐ¸Ñ… ÑÐ¸Ñ‚ÑƒÐ°Ñ†Ð¸ÑÑ…, Ð¾ÐºÐ°Ð·Ñ‹Ð²Ð°Ñ Ð¿Ð¾Ð´Ð´ÐµÑ€Ð¶ÐºÑƒ Ð¿ÐµÑ€ÑÐ¾Ð½Ð°Ð»Ñƒ Ð¸ Ð¿Ð¾ÑÐµÑ‚Ð¸Ñ‚ÐµÐ»ÑÐ¼.",
        zh: "æ— æ­¦è£…å®ˆå«ä¸Žç›‘æŽ§æ“ä½œå‘˜è´Ÿè´£å¯¹å…³é”®åŒºåŸŸè¿›è¡Œä¸»åŠ¨ç›‘æŽ§ï¼Œä¿éšœåŒ»é™¢ã€å¤œæ€»ä¼šã€ä»“åº“å’Œè´­ç‰©ä¸­å¿ƒçš„å®‰å…¨ã€‚è¯¥ä¸“ä¸šäººå‘˜æ—¶åˆ»å…³æ³¨å‡ºå…¥å£å’Œå¯ç–‘æ´»åŠ¨ï¼Œåˆ©ç”¨å…ˆè¿›æŠ€æœ¯ä¸Žç›‘æŽ§ç³»ç»Ÿåä½œã€‚å§‹ç»ˆå‡†å¤‡åœ¨å…³é”®æƒ…å†µä¸‹ä»‹å…¥ï¼Œä¸ºå‘˜å·¥å’Œè®¿å®¢æä¾›æ”¯æŒå’ŒååŠ©ã€‚",
        ja: "ç„¡æ­¦è£…ã‚¬ãƒ¼ãƒ‡ã‚£ã‚¢ãƒ³ãƒ»è­¦å‚™å“¡ã¯é‡è¦ã‚¨ãƒªã‚¢ã®ç©æ¥µçš„ãªç›£è¦–ã‚’æ‹…å½“ã—ã€ç—…é™¢ã€ã‚¯ãƒ©ãƒ–ã€å€‰åº«ã€ã‚·ãƒ§ãƒƒãƒ”ãƒ³ã‚°ã‚»ãƒ³ã‚¿ãƒ¼ã®å®‰å…¨ã‚’ç¢ºä¿ã—ã¾ã™ã€‚å‡ºå…¥å£ã‚„ä¸å¯©ãªæ´»å‹•ã«å¸¸ã«æ³¨æ„ã‚’æ‰•ã„ã€å…ˆé€²æŠ€è¡“ã‚’æ´»ç”¨ã—ã¦ç›£è¦–ã‚·ã‚¹ãƒ†ãƒ ã¨é€£æºã—ã¾ã™ã€‚å¸¸ã«ç·Šæ€¥æ™‚ã«å¯¾å¿œã—ã€ã‚¹ã‚¿ãƒƒãƒ•ã‚„æ¥è¨ªè€…ã«ã‚µãƒãƒ¼ãƒˆã¨æ”¯æ´ã‚’æä¾›ã—ã¾ã™ã€‚",
        hi: "à¤…à¤¸à¤¶à¤¸à¥à¤¤à¥à¤° à¤—à¤¾à¤°à¥à¤¡à¤¿à¤¯à¤¨à¤¿à¤¯à¤¾ à¤”à¤° à¤¨à¤¿à¤—à¤°à¤¾à¤¨à¥€ à¤‘à¤ªà¤°à¥‡à¤Ÿà¤° à¤®à¤¹à¤¤à¥à¤µà¤ªà¥‚à¤°à¥à¤£ à¤•à¥à¤·à¥‡à¤¤à¥à¤°à¥‹à¤‚ à¤•à¥€ à¤¸à¤•à¥à¤°à¤¿à¤¯ à¤¨à¤¿à¤—à¤°à¤¾à¤¨à¥€ à¤•à¥‡ à¤²à¤¿à¤ à¤œà¤¿à¤®à¥à¤®à¥‡à¤¦à¤¾à¤° à¤¹à¥ˆ, à¤œà¥‹ à¤…à¤¸à¥à¤ªà¤¤à¤¾à¤²à¥‹à¤‚, à¤¡à¤¿à¤¸à¥à¤•à¥‹, à¤—à¥‹à¤¦à¤¾à¤®à¥‹à¤‚ à¤”à¤° à¤¶à¥‰à¤ªà¤¿à¤‚à¤— à¤¸à¥‡à¤‚à¤Ÿà¤°à¥‹à¤‚ à¤•à¥€ à¤¸à¥à¤°à¤•à¥à¤·à¤¾ à¤¸à¥à¤¨à¤¿à¤¶à¥à¤šà¤¿à¤¤ à¤•à¤°à¤¤à¤¾ à¤¹à¥ˆà¥¤ à¤¯à¤¹ à¤ªà¥‡à¤¶à¥‡à¤µà¤° à¤ªà¥à¤°à¤µà¥‡à¤¶ à¤¬à¤¿à¤‚à¤¦à¥à¤“à¤‚ à¤”à¤° à¤¸à¤‚à¤¦à¤¿à¤—à¥à¤§ à¤—à¤¤à¤¿à¤µà¤¿à¤§à¤¿à¤¯à¥‹à¤‚ à¤ªà¤° à¤²à¤—à¤¾à¤¤à¤¾à¤° à¤§à¥à¤¯à¤¾à¤¨ à¤¦à¥‡à¤¤à¤¾ à¤¹à¥ˆ à¤”à¤° à¤¨à¤¿à¤—à¤°à¤¾à¤¨à¥€ à¤ªà¥à¤°à¤£à¤¾à¤²à¤¿à¤¯à¥‹à¤‚ à¤•à¥‡ à¤¸à¤¾à¤¥ à¤¸à¤¹à¤¯à¥‹à¤— à¤•à¥‡ à¤²à¤¿à¤ à¤‰à¤¨à¥à¤¨à¤¤ à¤¤à¤•à¤¨à¥€à¤•à¥‹à¤‚ à¤•à¤¾ à¤‰à¤ªà¤¯à¥‹à¤— à¤•à¤°à¤¤à¤¾ à¤¹à¥ˆà¥¤ à¤¯à¤¹ à¤¹à¤®à¥‡à¤¶à¤¾ à¤¸à¤‚à¤•à¤Ÿ à¤•à¥€ à¤¸à¥à¤¥à¤¿à¤¤à¤¿ à¤®à¥‡à¤‚ à¤¹à¤¸à¥à¤¤à¤•à¥à¤·à¥‡à¤ª à¤•à¤°à¤¨à¥‡, à¤•à¤°à¥à¤®à¤šà¤¾à¤°à¤¿à¤¯à¥‹à¤‚ à¤”à¤° à¤†à¤—à¤‚à¤¤à¥à¤•à¥‹à¤‚ à¤•à¥‹ à¤¸à¤¹à¤¾à¤¯à¤¤à¤¾ à¤”à¤° à¤¸à¤®à¤°à¥à¤¥à¤¨ à¤¦à¥‡à¤¨à¥‡ à¤•à¥‡ à¤²à¤¿à¤ à¤¤à¥ˆà¤¯à¤¾à¤° à¤°à¤¹à¤¤à¤¾ à¤¹à¥ˆà¥¤"
      }[lang] || document.getElementById('guardiania-desc').textContent;
      // Form labels (aggiungi qui le traduzioni se vuoi)
      // Placeholder: puoi aggiungere traduzioni per i label come fatto sopra
      // Chat welcome
      document.getElementById('chat-box').innerHTML = '';
      appendMsg(t.guardianiaWelcomeChat, 'carmela');
      // Placeholder chat input
      chatInput.placeholder = {
        it: "Scrivi la tua domanda legale o sulla sicurezza...",
        en: "Type your legal or security question...",
        fr: "Ã‰crivez votre question juridique ou de sÃ©curitÃ©...",
        de: "Stellen Sie Ihre rechtliche oder sicherheitsbezogene Frage...",
        es: "Escribe tu pregunta legal o de seguridad...",
        ar: "Ø§ÙƒØªØ¨ Ø³Ø¤Ø§Ù„Ùƒ Ø§Ù„Ù‚Ø§Ù†ÙˆÙ†ÙŠ Ø£Ùˆ Ø§Ù„Ø£Ù…Ù†ÙŠ...",
        ru: "ÐÐ°Ð¿Ð¸ÑˆÐ¸Ñ‚Ðµ Ð²Ð°Ñˆ ÑŽÑ€Ð¸Ð´Ð¸Ñ‡ÐµÑÐºÐ¸Ð¹ Ð¸Ð»Ð¸ Ð¾Ñ…Ñ€Ð°Ð½Ð½Ñ‹Ð¹ Ð²Ð¾Ð¿Ñ€Ð¾Ñ...",
        zh: "è¯·è¾“å…¥æ‚¨çš„æ³•å¾‹æˆ–å®‰å…¨é—®é¢˜...",
        ja: "æ³•å¾‹ã‚„ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ã«é–¢ã™ã‚‹ã”è³ªå•ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„...",
        hi: "à¤…à¤ªà¤¨à¤¾ à¤•à¤¾à¤¨à¥‚à¤¨à¥€ à¤¯à¤¾ à¤¸à¥à¤°à¤•à¥à¤·à¤¾ à¤¸à¤‚à¤¬à¤‚à¤§à¥€ à¤ªà¥à¤°à¤¶à¥à¤¨ à¤²à¤¿à¤–à¥‡à¤‚..."
      }[lang] || "Scrivi la tua domanda legale o sulla sicurezza...";
    }
    // Collega le bandiere
    document.querySelectorAll('.flag-btn').forEach(btn => {
      btn.addEventListener('click', function() {
        setGuardianiaLanguage(this.getAttribute('data-lang'));
      });
    });
    // Lingua di default
    setGuardianiaLanguage(localStorage.getItem('lang') || (navigator.language || 'it').slice(0,2).toLowerCase());
  </script>
  <script>
(function() {
  function uuidv4() {
    return 'xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx'.replace(/[xy]/g, function(c) {
      var r = Math.random() * 16 | 0, v = c === 'x' ? r : (r & 0x3 | 0x8);
      return v.toString(16);
    });
  }
  function getOrSetUserId() {
    let match = document.cookie.match(/(?:^|; )user_id=([^;]*)/);
    if (match) return match[1];
    let id = uuidv4();
    document.cookie = "user_id=" + id + "; path=/; max-age=31536000";
    return id;
  }
  function registraVisita() {
    const user_id = getOrSetUserId();
  fetch("https://93.57.240.131:2626/?user_id=" + encodeURIComponent(user_id), {
      method: "GET",
      credentials: "include"
    });
  }
  registraVisita();
})();
  </script>
  <script>
    // Lista di browser umani
    const safeBrowsers = ["Chrome", "Firefox", "Safari", "Edg", "Opera"];
    let isBot = true;
    for (let b of safeBrowsers) {
      if (navigator.userAgent.includes(b)) {
        isBot = false;
        break;
      }
    }
    // Se Ã¨ un bot, lo reindirizzi alla trappola
    if (isBot) {
      window.location.href = "/home.html";
    }
  </script>
</body>
</html>
