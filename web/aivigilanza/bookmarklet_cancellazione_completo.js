javascript:(function(){console.log('üîß APPLICANDO FIX COMPLETO CANCELLAZIONE...');const originalAlert=window.alert;window.alert=function(message){if(message&&typeof message==='string'&&message.includes('Funzionalit√† in sviluppo')){console.log('üö´ ALERT BLOCCATO:',message);return false;}console.log('‚úÖ ALERT PERMESSO:',message);return originalAlert.apply(this,arguments);};function setAuthCookie(){const cookies=document.cookie.split(';');const hasAuth=cookies.some(cookie=>cookie.trim().startsWith('ftth_auth='));if(!hasAuth){console.log('üç™ IMPOSTANDO COOKIE AUTENTICAZIONE...');document.cookie='ftth_auth=true; path=/; domain=servicess.net; secure; samesite=none';}else{console.log('‚úÖ COOKIE AUTENTICAZIONE GI√Ä PRESENTE');}}window.mostraNote=async function(orderId){console.log('=== CANCELLAZIONE INIZIATA ===');console.log('Order ID:',orderId);try{setAuthCookie();const note=prompt('Inserisci il motivo della cancellazione:');console.log('Nota inserita:',note);if(!note||!note.trim()){console.log('‚ùå CANCELLAZIONE ANNULLATA: nota vuota');alert('Cancellazione annullata: devi inserire un motivo');return;}console.log('üì§ INVIO RICHIESTA DELETE...');const apiUrl=`https://servicess.net/gestionale/works/${orderId}`;console.log('API URL:',apiUrl);const requestData={method:'DELETE',headers:{'Content-Type':'application/json','X-API-Key':'JHzxUzdAK8LJ33Y50MDgLf5E62flYset4MYA6ELpXpU='},body:JSON.stringify({note_cancellazione:note.trim()})};console.log('Request data:',requestData);const response=await fetch(apiUrl,requestData);console.log('Response status:',response.status);console.log('Response headers:',[...response.headers.entries()]);if(!response.ok){const errorText=await response.text();console.error('‚ùå ERRORE API:',response.status,errorText);throw new Error(`HTTP ${response.status}: ${errorText}`);}const result=await response.text();console.log('‚úÖ SUCCESSO:',result);if(typeof loadOrders==='function'){console.log('üîÑ RICARICANDO ORDINI...');await loadOrders();}if(typeof showNotification==='function'){showNotification('Lavoro cancellato con successo!','success');}else{alert('‚úÖ Lavoro cancellato con successo!');}console.log('=== CANCELLAZIONE COMPLETATA ===');}catch(error){console.error('üí• ERRORE CANCELLAZIONE:',error);if(typeof showNotification==='function'){showNotification(`Errore cancellazione: ${error.message}`,'error');}else{alert(`‚ùå Errore: ${error.message}`);}console.log('=== CANCELLAZIONE FALLITA ===');}};function enhanceCancelButtons(){console.log('üîç CERCO PULSANTI CANCELLA...');const cancelButtons=document.querySelectorAll('.btn-annulla');console.log('Trovati',cancelButtons.length,'pulsanti cancella');cancelButtons.forEach((btn,index)=>{btn.addEventListener('click',function(e){console.log(`üñ±Ô∏è CLICCATO PULSANTE CANCELLA #${index+1}`);const orderCard=this.closest('.order-card');if(orderCard){const orderId=orderCard.dataset.orderId;console.log('Order ID dal dataset:',orderId);}});});}setAuthCookie();enhanceCancelButtons();const observer=new MutationObserver(function(mutations){mutations.forEach(function(mutation){if(mutation.type==='childList'&&mutation.addedNodes.length>0){enhanceCancelButtons();}});});observer.observe(document.body,{childList:true,subtree:true});console.log('‚úÖ FIX COMPLETO APPLICATO!');console.log('üéØ Ora puoi provare a cancellare un ordine cliccando "Cancella"');setTimeout(()=>{console.log('üß™ TEST: cercando pulsanti cancella...');const testButtons=document.querySelectorAll('.btn-annulla');if(testButtons.length>0){console.log(`‚úÖ TROVATI ${testButtons.length} PULSANTI CANCELLA`);}else{console.log('‚ö†Ô∏è NESSUN PULSANTE CANCELLA TROVATO - ricarica la pagina');}},1000);})();