<!DOCTYPE html>
<html lang="it">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Guardiania - Operatore di Sicurezza</title>
  <style>
    body {
      font-family: 'Georgia', 'Segoe UI', serif;
      margin: 0;
      background: linear-gradient(135deg, #181204 0%, #bfa14a 80%, #fffbe6 100%);
      color: #fffbe6;
      min-height: 100vh;
      overflow-x: hidden;
    }
    .lock-menu-container {
      width: 100%;
      display: flex;
      flex-direction: column;
      align-items: center;
      margin-top: 40px;
      margin-bottom: 30px;
      user-select: none;
    }
    .lock-menu-row {
      display: flex;
      flex-direction: row;
      align-items: center;
      justify-content: center;
      width: 100%;
      gap: 18px;
    }
    .lock-menu {
      width: 340px;
      height: 220px;
      background: rgba(34,34,34,0.8);
      border-radius: 30px;
      box-shadow: 0 0 30px #bfa14a99;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      position: relative;
      overflow: hidden;
      text-align: center;
    }
    .lock-menu .menu-item {
      width: 260px;
      height: 54px;
      line-height: 54px;
      font-size: 1.45em;
      color: #bfa14a;
      opacity: 0.5;
      transition: all 0.2s;
      background: none;
      border-radius: 20px;
      font-weight: bold;
      position: relative;
      z-index: 1;
      pointer-events: none;
      text-align: center;
    }
    .lock-menu .menu-item.selected {
      background: #bfa14a;
      color: #181204;
      font-size: 1.5em;
      opacity: 1;
      box-shadow: 0 2px 12px #bfa14a99;
      pointer-events: auto;
      cursor: pointer;
    }
    .lock-menu .menu-item.above, .lock-menu .menu-item.below {
      opacity: 0.8;
      font-size: 1em;
      color: #fffbe6;
    }
    .lock-menu .menu-item.far {
      opacity: 0.3;
      font-size: 0.9em;
      color: #aaa;
    }
    #leftBtn, #rightBtn {
      background: #bfa14a;
      color: #181204;
      border: none;
      border-radius: 50%;
      width: 64px;
      height: 64px;
      font-size: 2.3em;
      font-weight: bold;
      cursor: pointer;
      box-shadow: 0 2px 10px #bfa14a88;
      transition: background 0.2s, color 0.2s;
      display: flex;
      align-items: center;
      justify-content: center;
    }
    #leftBtn:hover, #rightBtn:hover {
      background: #229ED9;
      color: #fff;
    }
    .guardiania-box {
      background: rgba(34,34,34,0.92);
      border-radius: 24px;
      box-shadow: 0 0 32px #bfa14a99;
      padding: 48px 36px;
      max-width: 540px;
      text-align: center;
      margin: 0 auto 40px auto;
    }
    h1 {
      color: #bfa14a;
      font-size: 2.3em;
      margin-bottom: 24px;
      letter-spacing: 1px;
      font-family: 'Georgia', serif;
    }
    p {
      color: #fffbe6;
      font-size: 1.18em;
      line-height: 1.6;
    }
    label {
      color: #bfa14a;
      font-weight: bold;
      font-size: 1.08em;
    }
    input, textarea {
      background: #181204;
      color: #fffbe6;
      border: 1px solid #bfa14a;
      border-radius: 8px;
      padding: 10px;
      font-size: 1.1em;
      margin-bottom: 18px;
      width: 80%;
      box-shadow: 0 2px 8px #bfa14a22 inset;
      transition: box-shadow 0.2s;
    }
    input:focus, textarea:focus {
      outline: none;
      box-shadow: 0 0 0 2px #bfa14a;
    }
    button[type="submit"] {
      background: #bfa14a;
      color: #181204;
      font-weight: bold;
      padding: 12px 32px;
      border: none;
      border-radius: 18px;
      font-size: 1.2em;
      box-shadow: 0 2px 10px #bfa14a88;
      cursor: pointer;
      transition: background 0.2s, color 0.2s;
    }
    button[type="submit"]:hover {
      background: #229ED9;
      color: #fff;
    }
    #preventivoResult {
      color: #fffbe6;
      background: #181204;
      border: 1px solid #bfa14a;
      border-radius: 12px;
      padding: 18px 12px;
      font-size: 1.1em;
      margin-top: 18px;
      box-shadow: 0 2px 8px #bfa14a33;
    }
    #ibanBox {
      color: #bfa14a;
      font-size: 1.1em;
      font-weight: bold;
      margin-top: 18px;
    }
    @media (max-width: 700px) {
      .lock-menu {
        width: 98vw;
        height: 120px;
      }
      .lock-menu .menu-item {
        width: 98vw;
        height: 36px;
        font-size: 1.1em;
      }
      #leftBtn, #rightBtn {
        width: 44px;
        height: 44px;
        font-size: 1.5em;
      }
      .guardiania-box {
        padding: 18px 4vw;
      }
  </style>
</head>
<body>
  <!-- Barra bandierine per selezione lingua, visibile anche senza JS -->
  <div class="flag-bar" style="display:flex;gap:8px;justify-content:flex-end;padding:10px 18px 0 0;">
    <button class="flag-btn" data-lang="it" title="Italiano" style="font-size:1.7em;background:none;border:none;cursor:pointer;">üáÆüáπ</button>
    <button class="flag-btn" data-lang="en" title="English" style="font-size:1.7em;background:none;border:none;cursor:pointer;">üá¨üáß</button>
    <button class="flag-btn" data-lang="fr" title="Fran√ßais" style="font-size:1.7em;background:none;border:none;cursor:pointer;">üá´üá∑</button>
    <button class="flag-btn" data-lang="de" title="Deutsch" style="font-size:1.7em;background:none;border:none;cursor:pointer;">üá©üá™</button>
    <button class="flag-btn" data-lang="es" title="Espa√±ol" style="font-size:1.7em;background:none;border:none;cursor:pointer;">üá™üá∏</button>
    <button class="flag-btn" data-lang="ar" title="ÿßŸÑÿπÿ±ÿ®Ÿäÿ©" style="font-size:1.7em;background:none;border:none;cursor:pointer;">üá∏üá¶</button>
    <button class="flag-btn" data-lang="ru" title="–†—É—Å—Å–∫–∏–π" style="font-size:1.7em;background:none;border:none;cursor:pointer;">üá∑üá∫</button>
    <button class="flag-btn" data-lang="zh" title="‰∏≠Êñá" style="font-size:1.7em;background:none;border:none;cursor:pointer;">üá®üá≥</button>
    <button class="flag-btn" data-lang="ja" title="Êó•Êú¨Ë™û" style="font-size:1.7em;background:none;border:none;cursor:pointer;">üáØüáµ</button>
    <button class="flag-btn" data-lang="hi" title="‡§π‡§ø‡§®‡•ç‡§¶‡•Ä" style="font-size:1.7em;background:none;border:none;cursor:pointer;">üáÆüá≥</button>
  </div>
  <div class="lock-menu-container">
    <div class="lock-menu-row">
      <button id="leftBtn" aria-label="Precedente">&#9664;</button>
      <div class="lock-menu" id="lockMenu">
        <!-- Menu items will be injected here by JS -->
      </div>
      <button id="rightBtn" aria-label="Successivo">&#9654;</button>
    </div>
  </div>
  <div class="guardiania-box">
    <h1 id="guardiania-title">Guardiania e Vigilanza Disarmata</h1>
    <p id="guardiania-desc">L‚Äôoperatore di guardiania e vigilanza disarmata √® responsabile del monitoraggio attivo delle aree critiche, garantendo la sicurezza di ospedali, discoteche, magazzini e centri commerciali. Con un‚Äôattenzione costante agli accessi e alle attivit√† sospette, questo professionista utilizza tecnologie avanzate per collaborare con i sistemi di sorveglianza. √à sempre pronto a intervenire in caso di situazioni critiche, offrendo supporto e assistenza al personale e ai visitatori.</p>
    <form id="preventivoForm" style="margin-top:32px;">
      <label id="guardiania-form-title" for="numPersone" style="display:block;margin-bottom:8px;font-weight:bold;">Numero di operatori richiesti:</label>
      <input type="number" id="numPersone" name="numPersone" min="1" required style="width:80%;padding:10px;margin-bottom:18px;border-radius:8px;border:none;font-size:1.1em;">
      <label id="guardiania-form-place" for="luogo" style="display:block;margin-bottom:8px;font-weight:bold;">Luogo/Area di servizio:</label>
      <input type="text" id="luogo" name="luogo" required style="width:80%;padding:10px;margin-bottom:18px;border-radius:8px;border:none;font-size:1.1em;">
      <label id="guardiania-form-calendar" for="calendario" style="display:block;margin-bottom:8px;font-weight:bold;">Calendario turni (date e orari):</label>
      <textarea id="calendario" name="calendario" rows="3" required style="width:80%;padding:10px;margin-bottom:8px;border-radius:8px;border:none;font-size:1.1em;"></textarea>
      <label id="guardiania-form-phone" for="telefono" style="display:block;margin-bottom:8px;font-weight:bold;">Recapito telefonico (WhatsApp o cellulare):</label>
      <input type="tel" id="telefono" name="telefono" required pattern="[0-9+ ]{7,}" style="width:80%;padding:10px;margin-bottom:18px;border-radius:8px;border:none;font-size:1.1em;">
      <label id="guardiania-form-notes" for="contatti" style="display:block;margin-bottom:8px;font-weight:bold;">Contatti alternativi o note (email, Telegram, preferenze, ecc):</label>
      <textarea id="contatti" name="contatti" rows="2" id="guardiania-form-notes-input" placeholder="Scrivi qui qualsiasi informazione utile per ricontattarti o richieste particolari..." style="width:80%;padding:10px;margin-bottom:18px;border-radius:8px;border:none;font-size:1.1em;"></textarea>
      <button type="submit" id="guardiania-form-btn" style="background:#bfa14a;color:#222;font-weight:bold;padding:12px 32px;border:none;border-radius:18px;font-size:1.2em;box-shadow:0 2px 10px #bfa14a88;cursor:pointer;">Genera Preventivo PDF</button>
    </form>
    <div id="preventivoResult" style="margin-top:28px;display:none;"></div>
  </div>
  <script>
    // Menu stile "lucchetto a combinazione"
    const menuItems = [
      { label: 'Home', href: 'index.html' },
      { label: 'Guardiania', href: 'guardiania.html' },
      { label: 'Legale', href: 'legale.html' },
      { label: 'Domotica', href: 'domotica.html' },
      { label: 'Criptotelefonia', href: 'https://vpn-gypsy.com/' },
      { label: '7070', href: 'antivirus.html' },
      { label: 'Bonifiche', href: 'bonifiche.html' },
      { label: 'SafeNode‚Ñ¢', href: 'SafeNode.html' },
      { label: 'Pulizie Straordinarie', href: 'straordinarie.html' },
      { label: 'Contatti', href: 'contatti.html' },
      { label: 'Chi siamo', href: 'chisiamo.html' }
    ];
    let selectedIdx = 1;
    const lockMenu = document.getElementById('lockMenu');
    function renderMenu() {
      lockMenu.innerHTML = '';
      for (let i = -2; i <= 2; i++) {
        let idx = (selectedIdx + i + menuItems.length) % menuItems.length;
        let item = document.createElement('a');
        item.className = 'menu-item';
        if (i === 0) item.classList.add('selected');
        else if (Math.abs(i) === 1) item.classList.add(i < 0 ? 'above' : 'below');
        else item.classList.add('far');
        item.href = menuItems[idx].href;
        item.textContent = menuItems[idx].label;
        if (i === 0) item.tabIndex = 0;
        lockMenu.appendChild(item);
      }
    }
    function moveUp() {
      selectedIdx = (selectedIdx - 1 + menuItems.length) % menuItems.length;
      renderMenu();
    }
    function moveDown() {
      selectedIdx = (selectedIdx + 1) % menuItems.length;
      renderMenu();
    }
    document.getElementById('leftBtn').onclick = moveUp;
    document.getElementById('rightBtn').onclick = moveDown;
    document.addEventListener('keydown', e => {
      if (e.key === 'ArrowLeft') { moveUp(); e.preventDefault(); }
      if (e.key === 'ArrowRight') { moveDown(); e.preventDefault(); }
    });
    let touchStartX = null;
    lockMenu.addEventListener('touchstart', e => {
      touchStartX = e.touches[0].clientX;
    });
    lockMenu.addEventListener('touchend', e => {
      if (touchStartX === null) return;
      let deltaX = e.changedTouches[0].clientX - touchStartX;
      if (deltaX < -30) moveDown();
      if (deltaX > 30) moveUp();
      touchStartX = null;
    });
    renderMenu();
    // Form preventivo con generazione PDF (placeholder, motore da implementare)
    document.getElementById('preventivoForm').onsubmit = async function(e) {
      e.preventDefault();
      const lang = localStorage.getItem('lang') || (navigator.language || 'it').slice(0,2).toLowerCase();
      const t = window.translations && window.translations[lang] ? window.translations[lang] : window.translations['it'];
      const numPersone = document.getElementById('numPersone').value;
      const luogo = document.getElementById('luogo').value;
      const calendario = document.getElementById('calendario').value;
      const oreTotali = 8; // Placeholder, da calcolare dal calendario
      const prezzo = numPersone * oreTotali * 13;
      // Dati minimi per il backend (aggiungi altri campi se vuoi)
      const dati = {
        nome_cliente: '', // puoi aggiungere un campo nome nel form se vuoi
        indirizzo_cliente: luogo,
        cf_cliente: '', // opzionale, aggiungi campo se vuoi
        durata_mesi: '1', // o altro valore
        data_inizio: new Date().toLocaleDateString('it-IT'),
        numero_operatori: numPersone,
        ore_per_operatore: oreTotali,
        tariffa_oraria: 13,
        foro_competente: luogo,
        luogo_data: luogo + ', ' + new Date().toLocaleDateString('it-IT'),
        firma_cliente: '',
        luogo: luogo,
        calendario: calendario
      };
      // Chiamata al backend
      try {
  const response = await fetch('/genera-contratto', {
          method: 'POST',
          headers: { 'Content-Type': 'application/json' },
          body: JSON.stringify(dati)
        });
        if (!response.ok) {
          const errorText = await response.text();
          console.error('Errore generazione contratto:', errorText);
          throw new Error('Errore generazione contratto: ' + errorText);
        }
        const blob = await response.blob();
        const url = window.URL.createObjectURL(blob);
        const a = document.createElement('a');
        a.href = url;
        a.download = `contratto_guardiania_${luogo.replace(/\s+/g,'_')}.pdf`;
        document.body.appendChild(a);
        a.click();
        a.remove();
        window.URL.revokeObjectURL(url);
        document.getElementById('preventivoResult').style.display = 'block';
        document.getElementById('preventivoResult').innerHTML =
          (t.guardianiaResultOk || '<strong>Contratto generato!</strong><br>Controlla i download per il file.<br>')+
          `${numPersone} ${(t.guardianiaResultPrice||'operatori x ore x 13‚Ç¨/ora = <span style=\'color:#bfa14a;font-size:1.3em;\'>‚Ç¨</span>').replace('operatori','operatori').replace('ore','ore').replace('13‚Ç¨/ora','13‚Ç¨/ora').replace('‚Ç¨', prezzo)}`;
      } catch (err) {
        console.error('Errore fetch preventivo:', err);
        document.getElementById('preventivoResult').style.display = 'block';
        document.getElementById('preventivoResult').innerHTML = (t.guardianiaResultErr || 'Errore nella generazione del contratto. Riprova.') + '<br><pre style="color:red;">' + err + '</pre>';
      }
    };
  </script>
  <!-- lang.js rimosso: non necessario -->
  <script src="traduzione/guardiania.js"></script>
  <!-- Assicurati che questo script sia caricato PRIMA degli altri script che usano window.translations -->
  <script>
    // Funzione per cambiare lingua e aggiornare i testi
    function setGuardianiaLanguage(lang) {
      localStorage.setItem('lang', lang);
      const t = window.translations && window.translations[lang] ? window.translations[lang] : window.translations['it'];
      // Titolo e descrizione
      document.getElementById('guardiania-title').textContent = {
        it: "Guardiania e Vigilanza Disarmata",
        en: "Unarmed Security and Surveillance",
        fr: "Surveillance et Gardiennage non arm√©",
        de: "Unbewaffneter Wachdienst",
        es: "Guardian√≠a y Vigilancia sin armas",
        ar: "ÿßŸÑÿ≠ÿ±ÿßÿ≥ÿ© ŸàÿßŸÑŸÖÿ±ÿßŸÇÿ®ÿ© ÿ®ÿØŸàŸÜ ÿ≥ŸÑÿßÿ≠",
        ru: "–û—Ö—Ä–∞–Ω–∞ –∏ –Ω–µ–≤–æ–æ—Ä—É–∂—ë–Ω–Ω–æ–µ –Ω–∞–±–ª—é–¥–µ–Ω–∏–µ",
        zh: "Êó†Ê≠¶Ë£ÖÂÆàÂç´‰∏éÁõëÊéß",
        ja: "ÁÑ°Ê≠¶Ë£Ö„Ç¨„Éº„Éá„Ç£„Ç¢„É≥„ÉªË≠¶ÂÇô",
        hi: "‡§Ö‡§∏‡§∂‡§∏‡•ç‡§§‡•ç‡§∞ ‡§ó‡§æ‡§∞‡•ç‡§°‡§ø‡§Ø‡§®‡§ø‡§Ø‡§æ ‡§î‡§∞ ‡§®‡§ø‡§ó‡§∞‡§æ‡§®‡•Ä"
      }[lang] || "Guardiania e Vigilanza Disarmata";
      document.getElementById('guardiania-desc').textContent = {
        it: "L‚Äôoperatore di guardiania e vigilanza disarmata √® responsabile del monitoraggio attivo delle aree critiche, garantendo la sicurezza di ospedali, discoteche, magazzini e centri commerciali. Con un‚Äôattenzione costante agli accessi e alle attivit√† sospette, questo professionista utilizza tecnologie avanzate per collaborare con i sistemi di sorveglianza. √à sempre pronto a intervenire in caso di situazioni critiche, offrendo supporto e assistenza al personale e ai visitatori.",
        en: "The unarmed security operator is responsible for actively monitoring critical areas, ensuring the safety of hospitals, clubs, warehouses, and shopping centers. With constant attention to access points and suspicious activities, this professional uses advanced technologies to collaborate with surveillance systems. Always ready to intervene in critical situations, providing support and assistance to staff and visitors.",
        fr: "L‚Äôop√©rateur de surveillance et de gardiennage non arm√© est responsable de la surveillance active des zones critiques, garantissant la s√©curit√© des h√¥pitaux, discoth√®ques, entrep√¥ts et centres commerciaux. Gr√¢ce √† une attention constante aux acc√®s et aux activit√©s suspectes, ce professionnel utilise des technologies avanc√©es pour collaborer avec les syst√®mes de surveillance. Il est toujours pr√™t √† intervenir en cas de situations critiques, offrant soutien et assistance au personnel et aux visiteurs.",
        de: "Der unbewaffnete Sicherheitsmitarbeiter ist f√ºr die aktive √úberwachung kritischer Bereiche verantwortlich und gew√§hrleistet die Sicherheit von Krankenh√§usern, Diskotheken, Lagern und Einkaufszentren. Mit st√§ndiger Aufmerksamkeit f√ºr Zug√§nge und verd√§chtige Aktivit√§ten nutzt dieser Profi fortschrittliche Technologien zur Zusammenarbeit mit √úberwachungssystemen. Er ist stets bereit, in kritischen Situationen einzugreifen und Personal sowie Besuchern Unterst√ºtzung zu bieten.",
        es: "El operador de guardian√≠a y vigilancia sin armas es responsable de la monitorizaci√≥n activa de √°reas cr√≠ticas, garantizando la seguridad de hospitales, discotecas, almacenes y centros comerciales. Con
        a.download = `contratto_guardiania_${luogo.replace(/\s+/g,'_')}.pdf`;
        document.body.appendChild(a);
        a.click();
        a.remove();
        window.URL.revokeObjectURL(url);
        document.getElementById('preventivoResult').style.display = 'block';
        document.getElementById('preventivoResult').innerHTML =
          (t.guardianiaResultOk || '<strong>Contratto generato!</strong><br>Controlla i download per il file.<br>')+
          `${numPersone} ${(t.guardianiaResultPrice||'operatori x ore x 13‚Ç¨/ora = <span style=\'color:#bfa14a;font-size:1.3em;\'>‚Ç¨</span>').replace('operatori','operatori').replace('ore','ore').replace('13‚Ç¨/ora','13‚Ç¨/ora').replace('‚Ç¨', prezzo)}`;
      } catch (err) {
        console.error('Errore fetch preventivo:', err);
        document.getElementById('preventivoResult').style.display = 'block';
        document.getElementById('preventivoResult').innerHTML = (t.guardianiaResultErr || 'Errore nella generazione del contratto. Riprova.') + '<br><pre style="color:red;">' + err + '</pre>';
      }
    };
  </script>
  <!-- lang.js rimosso: non necessario -->
  <script src="traduzione/guardiania.js"></script>
  <!-- Assicurati che questo script sia caricato PRIMA degli altri script che usano window.translations -->
  <script>
    // Funzione per cambiare lingua e aggiornare i testi
    function setGuardianiaLanguage(lang) {
      localStorage.setItem('lang', lang);
      const t = window.translations && window.translations[lang] ? window.translations[lang] : window.translations['it'];
      // Titolo e descrizione
      document.getElementById('guardiania-title').textContent = {
        it: "Guardiania e Vigilanza Disarmata",
        en: "Unarmed Security and Surveillance",
        fr: "Surveillance et Gardiennage non arm√©",
        de: "Unbewaffneter Wachdienst",
        es: "Guardian√≠a y Vigilancia sin armas",
        ar: "ÿßŸÑÿ≠ÿ±ÿßÿ≥ÿ© ŸàÿßŸÑŸÖÿ±ÿßŸÇÿ®ÿ© ÿ®ÿØŸàŸÜ ÿ≥ŸÑÿßÿ≠",
        ru: "–û—Ö—Ä–∞–Ω–∞ –∏ –Ω–µ–≤–æ–æ—Ä—É–∂—ë–Ω–Ω–æ–µ –Ω–∞–±–ª—é–¥–µ–Ω–∏–µ",
        zh: "Êó†Ê≠¶Ë£ÖÂÆàÂç´‰∏éÁõëÊéß",
        ja: "ÁÑ°Ê≠¶Ë£Ö„Ç¨„Éº„Éá„Ç£„Ç¢„É≥„ÉªË≠¶ÂÇô",
        hi: "‡§Ö‡§∏‡§∂‡§∏‡•ç‡§§‡•ç‡§∞ ‡§ó‡§æ‡§∞‡•ç‡§°‡§ø‡§Ø‡§®‡§ø‡§Ø‡§æ ‡§î‡§∞ ‡§®‡§ø‡§ó‡§∞‡§æ‡§®‡•Ä"
      }[lang] || "Guardiania e Vigilanza Disarmata";
      document.getElementById('guardiania-desc').textContent = {
        it: "L‚Äôoperatore di guardiania e vigilanza disarmata √® responsabile del monitoraggio attivo delle aree critiche, garantendo la sicurezza di ospedali, discoteche, magazzini e centri commerciali. Con un‚Äôattenzione costante agli accessi e alle attivit√† sospette, questo professionista utilizza tecnologie avanzate per collaborare con i sistemi di sorveglianza. √à sempre pronto a intervenire in caso di situazioni critiche, offrendo supporto e assistenza al personale e ai visitatori.",
        en: "The unarmed security operator is responsible for actively monitoring critical areas, ensuring the safety of hospitals, clubs, warehouses, and shopping centers. With constant attention to access points and suspicious activities, this professional uses advanced technologies to collaborate with surveillance systems. Always ready to intervene in critical situations, providing support and assistance to staff and visitors.",
        fr: "L‚Äôop√©rateur de surveillance et de gardiennage non arm√© est responsable de la surveillance active des zones critiques, garantissant la s√©curit√© des h√¥pitaux, discoth√®ques, entrep√¥ts et centres commerciaux. Gr√¢ce √† une attention constante aux acc√®s et aux activit√©s suspectes, ce professionnel utilise des technologies avanc√©es pour collaborer avec les syst√®mes de surveillance. Il est toujours pr√™t √† intervenir en cas de situations critiques, offrant soutien et assistance au personnel et aux visiteurs.",
        de: "Der unbewaffnete Sicherheitsmitarbeiter ist f√ºr die aktive √úberwachung kritischer Bereiche verantwortlich und gew√§hrleistet die Sicherheit von Krankenh√§usern, Diskotheken, Lagern und Einkaufszentren. Mit st√§ndiger Aufmerksamkeit f√ºr Zug√§nge und verd√§chtige Aktivit√§ten nutzt dieser Profi fortschrittliche Technologien zur Zusammenarbeit mit √úberwachungssystemen. Er ist stets bereit, in kritischen Situationen einzugreifen und Personal sowie Besuchern Unterst√ºtzung zu bieten.",
        es: "El operador de guardian√≠a y vigilancia sin armas es responsable de la monitorizaci√≥n activa de √°reas cr√≠ticas, garantizando la seguridad de hospitales, discotecas, almacenes y centros comerciales. Con
    // Form preventivo con generazione PDF (placeholder, motore da implementare)
    document.getElementById('preventivoForm').onsubmit = async function(e) {
      e.preventDefault();
      const lang = localStorage.getItem('lang') || (navigator.language || 'it').slice(0,2).toLowerCase();
      const t = window.translations && window.translations[lang] ? window.translations[lang] : window.translations['it'];
      const numPersone = document.getElementById('numPersone').value;
      const luogo = document.getElementById('luogo').value;
      const calendario = document.getElementById('calendario').value;
      const oreTotali = 8; // Placeholder, da calcolare dal calendario
      const prezzo = numPersone * oreTotali * 13;
      // Dati minimi per il backend (aggiungi altri campi se vuoi)
      const dati = {
        nome_cliente: '', // puoi aggiungere un campo nome nel form se vuoi
        indirizzo_cliente: luogo,
        cf_cliente: '', // opzionale, aggiungi campo se vuoi
        durata_mesi: '1', // o altro valore
        data_inizio: new Date().toLocaleDateString('it-IT'),
        numero_operatori: numPersone,
        ore_per_operatore: oreTotali,
        tariffa_oraria: 13,
        foro_competente: luogo,
        luogo_data: luogo + ', ' + new Date().toLocaleDateString('it-IT'),
        firma_cliente: '',
        luogo: luogo,
        calendario: calendario
      };
      // Chiamata al backend
      try {
  const response = await fetch('/genera-contratto', {
          method: 'POST',
          headers: { 'Content-Type': 'application/json' },
          body: JSON.stringify(dati)
        });
        if (!response.ok) {
          const errorText = await response.text();
          console.error('Errore generazione contratto:', errorText);
          throw new Error('Errore generazione contratto: ' + errorText);
        }
        const blob = await response.blob();
        const url = window.URL.createObjectURL(blob);
        const a = document.createElement('a');
        a.href = url;
        a.download = `contratto_guardiania_${luogo.replace(/\s+/g,'_')}.pdf`;
        document.body.appendChild(a);
        a.click();
        a.remove();
        window.URL.revokeObjectURL(url);
        document.getElementById('preventivoResult').style.display = 'block';
        document.getElementById('preventivoResult').innerHTML =
          (t.guardianiaResultOk || '<strong>Contratto generato!</strong><br>Controlla i download per il file.<br>')+
          `${numPersone} ${(t.guardianiaResultPrice||'operatori x ore x 13‚Ç¨/ora = <span style=\'color:#bfa14a;font-size:1.3em;\'>‚Ç¨</span>').replace('operatori','operatori').replace('ore','ore').replace('13‚Ç¨/ora','13‚Ç¨/ora').replace('‚Ç¨', prezzo)}`;
        document.getElementById('ibanBox').style.display = 'block';
      } catch (err) {
        console.error('Errore fetch preventivo:', err);
        document.getElementById('preventivoResult').style.display = 'block';
        document.getElementById('preventivoResult').innerHTML = (t.guardianiaResultErr || 'Errore nella generazione del contratto. Riprova.') + '<br><pre style="color:red;">' + err + '</pre>';
      }
    };
  </script>
  <!-- lang.js rimosso: non necessario -->
  <script src="traduzione/guardiania.js"></script>
  <!-- Assicurati che questo script sia caricato PRIMA degli altri script che usano window.translations -->
  <script>
    // Funzione per cambiare lingua e aggiornare i testi
    function setGuardianiaLanguage(lang) {
      localStorage.setItem('lang', lang);
      const t = window.translations && window.translations[lang] ? window.translations[lang] : window.translations['it'];
      // Titolo e descrizione
      document.getElementById('guardiania-title').textContent = {
        it: "Guardiania e Vigilanza Disarmata",
        en: "Unarmed Security and Surveillance",
        fr: "Surveillance et Gardiennage non arm√©",
        de: "Unbewaffneter Wachdienst",
        es: "Guardian√≠a y Vigilancia sin armas",
        ar: "ÿßŸÑÿ≠ÿ±ÿßÿ≥ÿ© ŸàÿßŸÑŸÖÿ±ÿßŸÇÿ®ÿ© ÿ®ÿØŸàŸÜ ÿ≥ŸÑÿßÿ≠",
        ru: "–û—Ö—Ä–∞–Ω–∞ –∏ –Ω–µ–≤–æ–æ—Ä—É–∂—ë–Ω–Ω–æ–µ –Ω–∞–±–ª—é–¥–µ–Ω–∏–µ",
        zh: "Êó†Ê≠¶Ë£ÖÂÆàÂç´‰∏éÁõëÊéß",
        ja: "ÁÑ°Ê≠¶Ë£Ö„Ç¨„Éº„Éá„Ç£„Ç¢„É≥„ÉªË≠¶ÂÇô",
        hi: "‡§Ö‡§∏‡§∂‡§∏‡•ç‡§§‡•ç‡§∞ ‡§ó‡§æ‡§∞‡•ç‡§°‡§ø‡§Ø‡§®‡§ø‡§Ø‡§æ ‡§î‡§∞ ‡§®‡§ø‡§ó‡§∞‡§æ‡§®‡•Ä"
      }[lang] || "Guardiania e Vigilanza Disarmata";
      document.getElementById('guardiania-desc').textContent = {
        it: "L‚Äôoperatore di guardiania e vigilanza disarmata √® responsabile del monitoraggio attivo delle aree critiche, garantendo la sicurezza di ospedali, discoteche, magazzini e centri commerciali. Con un‚Äôattenzione costante agli accessi e alle attivit√† sospette, questo professionista utilizza tecnologie avanzate per collaborare con i sistemi di sorveglianza. √à sempre pronto a intervenire in caso di situazioni critiche, offrendo supporto e assistenza al personale e ai visitatori.",
        en: "The unarmed security operator is responsible for actively monitoring critical areas, ensuring the safety of hospitals, clubs, warehouses, and shopping centers. With constant attention to access points and suspicious activities, this professional uses advanced technologies to collaborate with surveillance systems. Always ready to intervene in critical situations, providing support and assistance to staff and visitors.",
        fr: "L‚Äôop√©rateur de surveillance et de gardiennage non arm√© est responsable de la surveillance active des zones critiques, garantissant la s√©curit√© des h√¥pitaux, discoth√®ques, entrep√¥ts et centres commerciaux. Gr√¢ce √† une attention constante aux acc√®s et aux activit√©s suspectes, ce professionnel utilise des technologies avanc√©es pour collaborer avec les syst√®mes de surveillance. Il est toujours pr√™t √† intervenir en cas de situations critiques, offrant soutien et assistance au personnel et aux visiteurs.",
        de: "Der unbewaffnete Sicherheitsmitarbeiter ist f√ºr die aktive √úberwachung kritischer Bereiche verantwortlich und gew√§hrleistet die Sicherheit von Krankenh√§usern, Diskotheken, Lagern und Einkaufszentren. Mit st√§ndiger Aufmerksamkeit f√ºr Zug√§nge und verd√§chtige Aktivit√§ten nutzt dieser Profi fortschrittliche Technologien zur Zusammenarbeit mit √úberwachungssystemen. Er ist stets bereit, in kritischen Situationen einzugreifen und Personal sowie Besuchern Unterst√ºtzung zu bieten.",
        es: "El operador de guardian√≠a y vigilancia sin armas es responsable de la monitorizaci√≥n activa de √°reas cr√≠ticas, garantizando la seguridad de hospitales, discotecas, almacenes y centros comerciales. Con atenci√≥n constante a los accesos y actividades sospechosas, este profesional utiliza tecnolog√≠as avanzadas para colaborar con los sistemas de vigilancia. Siempre est√° listo para intervenir en situaciones cr√≠ticas, ofreciendo apoyo y asistencia al personal y visitantes.",
        ar: "ŸÖÿ¥ÿ∫ŸÑ ÿßŸÑÿ≠ÿ±ÿßÿ≥ÿ© ŸàÿßŸÑŸÖÿ±ÿßŸÇÿ®ÿ© ÿ®ÿØŸàŸÜ ÿ≥ŸÑÿßÿ≠ ŸÖÿ≥ÿ§ŸàŸÑ ÿπŸÜ ÿßŸÑŸÖÿ±ÿßŸÇÿ®ÿ© ÿßŸÑŸÜÿ¥ÿ∑ÿ© ŸÑŸÑŸÖŸÜÿßÿ∑ŸÇ ÿßŸÑÿ≠ÿ±ÿ¨ÿ©ÿå Ÿàÿ∂ŸÖÿßŸÜ ÿ£ŸÖÿßŸÜ ÿßŸÑŸÖÿ≥ÿ™ÿ¥ŸÅŸäÿßÿ™ ŸàÿßŸÑŸÜŸàÿßÿØŸä ŸàÿßŸÑŸÖÿÆÿßÿ≤ŸÜ ŸàÿßŸÑŸÖÿ±ÿßŸÉÿ≤ ÿßŸÑÿ™ÿ¨ÿßÿ±Ÿäÿ©. ŸÖÿπ ÿßŸÑÿßŸÜÿ™ÿ®ÿßŸá ÿßŸÑÿØÿßÿ¶ŸÖ ŸÑŸÑŸÖÿØÿßÿÆŸÑ ŸàÿßŸÑÿ£ŸÜÿ¥ÿ∑ÿ© ÿßŸÑŸÖÿ¥ÿ®ŸàŸáÿ©ÿå Ÿäÿ≥ÿ™ÿÆÿØŸÖ Ÿáÿ∞ÿß ÿßŸÑŸÖÿ≠ÿ™ÿ±ŸÅ ÿ™ŸÇŸÜŸäÿßÿ™ ŸÖÿ™ŸÇÿØŸÖÿ© ŸÑŸÑÿ™ÿπÿßŸàŸÜ ŸÖÿπ ÿ£ŸÜÿ∏ŸÖÿ© ÿßŸÑŸÖÿ±ÿßŸÇÿ®ÿ©. ŸàŸáŸà ÿØÿßÿ¶ŸÖŸãÿß ŸÖÿ≥ÿ™ÿπÿØ ŸÑŸÑÿ™ÿØÿÆŸÑ ŸÅŸä ÿßŸÑÿ≠ÿßŸÑÿßÿ™ ÿßŸÑÿ≠ÿ±ÿ¨ÿ©ÿå Ÿàÿ™ŸÇÿØŸäŸÖ ÿßŸÑÿØÿπŸÖ ŸàÿßŸÑŸÖÿ≥ÿßÿπÿØÿ© ŸÑŸÑŸÖŸàÿ∏ŸÅŸäŸÜ ŸàÿßŸÑÿ≤Ÿàÿßÿ±.",
        ru: "–û–ø–µ—Ä–∞—Ç–æ—Ä –æ—Ö—Ä–∞–Ω—ã –∏ –Ω–µ–≤–æ–æ—Ä—É–∂—ë–Ω–Ω–æ–≥–æ –Ω–∞–±–ª—é–¥–µ–Ω–∏—è –æ—Ç–≤–µ—á–∞–µ—Ç –∑–∞ –∞–∫—Ç–∏–≤–Ω—ã–π –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏—Ö –∑–æ–Ω, –æ–±–µ—Å–ø–µ—á–∏–≤–∞—è –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å –±–æ–ª—å–Ω–∏—Ü, –∫–ª—É–±–æ–≤, —Å–∫–ª–∞–¥–æ–≤ –∏ —Ç–æ—Ä–≥–æ–≤—ã—Ö —Ü–µ–Ω—Ç—Ä–æ–≤. –ü–æ—Å—Ç–æ—è–Ω–Ω–æ —Å–ª–µ–¥—è –∑–∞ –¥–æ—Å—Ç—É–ø–∞–º–∏ –∏ –ø–æ–¥–æ–∑—Ä–∏—Ç–µ–ª—å–Ω–æ–π –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç—å—é, —ç—Ç–æ—Ç —Å–ø–µ—Ü–∏–∞–ª–∏—Å—Ç –∏—Å–ø–æ–ª—å–∑—É–µ—Ç —Å–æ–≤—Ä–µ–º–µ–Ω–Ω—ã–µ —Ç–µ—Ö–Ω–æ–ª–æ–≥–∏–∏ –¥–ª—è –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏—è —Å —Å–∏—Å—Ç–µ–º–∞–º–∏ –≤–∏–¥–µ–æ–Ω–∞–±–ª—é–¥–µ–Ω–∏—è. –í—Å–µ–≥–¥–∞ –≥–æ—Ç–æ–≤ –≤–º–µ—à–∞—Ç—å—Å—è –≤ –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏—Ö —Å–∏—Ç—É–∞—Ü–∏—è—Ö, –æ–∫–∞–∑—ã–≤–∞—è –ø–æ–¥–¥–µ—Ä–∂–∫—É –ø–µ—Ä—Å–æ–Ω–∞–ª—É –∏ –ø–æ—Å–µ—Ç–∏—Ç–µ–ª—è–º.",
        zh: "Êó†Ê≠¶Ë£ÖÂÆàÂç´‰∏éÁõëÊéßÊìç‰ΩúÂëòË¥üË¥£ÂØπÂÖ≥ÈîÆÂå∫ÂüüËøõË°å‰∏ªÂä®ÁõëÊéßÔºå‰øùÈöúÂåªÈô¢„ÄÅÂ§úÊÄª‰ºö„ÄÅ‰ªìÂ∫ìÂíåË¥≠Áâ©‰∏≠ÂøÉÁöÑÂÆâÂÖ®„ÄÇËØ•‰∏ì‰∏ö‰∫∫ÂëòÊó∂ÂàªÂÖ≥Ê≥®Âá∫ÂÖ•Âè£ÂíåÂèØÁñëÊ¥ªÂä®ÔºåÂà©Áî®ÂÖàËøõÊäÄÊúØ‰∏éÁõëÊéßÁ≥ªÁªüÂçè‰Ωú„ÄÇÂßãÁªàÂáÜÂ§áÂú®ÂÖ≥ÈîÆÊÉÖÂÜµ‰∏ã‰ªãÂÖ•Ôºå‰∏∫ÂëòÂ∑•ÂíåËÆøÂÆ¢Êèê‰æõÊîØÊåÅÂíåÂçèÂä©„ÄÇ",
        ja: "ÁÑ°Ê≠¶Ë£Ö„Ç¨„Éº„Éá„Ç£„Ç¢„É≥„ÉªË≠¶ÂÇôÂì°„ÅØÈáçË¶Å„Ç®„É™„Ç¢„ÅÆÁ©çÊ•µÁöÑ„Å™Áõ£Ë¶ñ„ÇíÊãÖÂΩì„Åó„ÄÅÁóÖÈô¢„ÄÅ„ÇØ„É©„Éñ„ÄÅÂÄâÂ∫´„ÄÅ„Ç∑„Éß„ÉÉ„Éî„É≥„Ç∞„Çª„É≥„Çø„Éº„ÅÆÂÆâÂÖ®„ÇíÁ¢∫‰øù„Åó„Åæ„Åô„ÄÇÂá∫ÂÖ•Âè£„ÇÑ‰∏çÂØ©„Å™Ê¥ªÂãï„Å´Â∏∏„Å´Ê≥®ÊÑè„ÇíÊâï„ÅÑ„ÄÅÂÖàÈÄ≤ÊäÄË°ì„ÇíÊ¥ªÁî®„Åó„Å¶Áõ£Ë¶ñ„Ç∑„Çπ„ÉÜ„É†„Å®ÈÄ£Êê∫„Åó„Åæ„Åô„ÄÇÂ∏∏„Å´Á∑äÊÄ•ÊôÇ„Å´ÂØæÂøú„Åó„ÄÅ„Çπ„Çø„ÉÉ„Éï„ÇÑÊù•Ë®™ËÄÖ„Å´„Çµ„Éù„Éº„Éà„Å®ÊîØÊè¥„ÇíÊèê‰æõ„Åó„Åæ„Åô„ÄÇ",
        hi: "‡§Ö‡§∏‡§∂‡§∏‡•ç‡§§‡•ç‡§∞ ‡§ó‡§æ‡§∞‡•ç‡§°‡§ø‡§Ø‡§®‡§ø‡§Ø‡§æ ‡§î‡§∞ ‡§®‡§ø‡§ó‡§∞‡§æ‡§®‡•Ä ‡§ë‡§™‡§∞‡•á‡§ü‡§∞ ‡§Æ‡§π‡§§‡•ç‡§µ‡§™‡•Ç‡§∞‡•ç‡§£ ‡§ï‡•ç‡§∑‡•á‡§§‡•ç‡§∞‡•ã‡§Ç ‡§ï‡•Ä ‡§∏‡§ï‡•ç‡§∞‡§ø‡§Ø ‡§®‡§ø‡§ó‡§∞‡§æ‡§®‡•Ä ‡§ï‡•á ‡§≤‡§ø‡§è ‡§ú‡§ø‡§Æ‡•ç‡§Æ‡•á‡§¶‡§æ‡§∞ ‡§π‡•à, ‡§ú‡•ã ‡§Ö‡§∏‡•ç‡§™‡§§‡§æ‡§≤‡•ã‡§Ç, ‡§°‡§ø‡§∏‡•ç‡§ï‡•ã, ‡§ó‡•ã‡§¶‡§æ‡§Æ‡•ã‡§Ç ‡§î‡§∞ ‡§∂‡•â‡§™‡§ø‡§Ç‡§ó ‡§∏‡•á‡§Ç‡§ü‡§∞‡•ã‡§Ç ‡§ï‡•Ä ‡§∏‡•Å‡§∞‡§ï‡•ç‡§∑‡§æ ‡§∏‡•Å‡§®‡§ø‡§∂‡•ç‡§ö‡§ø‡§§ ‡§ï‡§∞‡§§‡§æ ‡§π‡•à‡•§ ‡§Ø‡§π ‡§™‡•á‡§∂‡•á‡§µ‡§∞ ‡§™‡•ç‡§∞‡§µ‡•á‡§∂ ‡§¨‡§ø‡§Ç‡§¶‡•Å‡§ì‡§Ç ‡§î‡§∞ ‡§∏‡§Ç‡§¶‡§ø‡§ó‡•ç‡§ß ‡§ó‡§§‡§ø‡§µ‡§ø‡§ß‡§ø‡§Ø‡•ã‡§Ç ‡§™‡§∞ ‡§≤‡§ó‡§æ‡§§‡§æ‡§∞ ‡§ß‡•ç‡§Ø‡§æ‡§® ‡§¶‡•á‡§§‡§æ ‡§π‡•à ‡§î‡§∞ ‡§®‡§ø‡§ó‡§∞‡§æ‡§®‡•Ä ‡§™‡•ç‡§∞‡§£‡§æ‡§≤‡§ø‡§Ø‡•ã‡§Ç ‡§ï‡•á ‡§∏‡§æ‡§• ‡§∏‡§π‡§Ø‡•ã‡§ó ‡§ï‡•á ‡§≤‡§ø‡§è ‡§â‡§®‡•ç‡§®‡§§ ‡§§‡§ï‡§®‡•Ä‡§ï‡•ã‡§Ç ‡§ï‡§æ ‡§â‡§™‡§Ø‡•ã‡§ó ‡§ï‡§∞‡§§‡§æ ‡§π‡•à‡•§ ‡§Ø‡§π ‡§π‡§Æ‡•á‡§∂‡§æ ‡§∏‡§Ç‡§ï‡§ü ‡§ï‡•Ä ‡§∏‡•ç‡§•‡§ø‡§§‡§ø ‡§Æ‡•á‡§Ç ‡§π‡§∏‡•ç‡§§‡§ï‡•ç‡§∑‡•á‡§™ ‡§ï‡§∞‡§®‡•á, ‡§ï‡§∞‡•ç‡§Æ‡§ö‡§æ‡§∞‡§ø‡§Ø‡•ã‡§Ç ‡§î‡§∞ ‡§Ü‡§ó‡§Ç‡§§‡•Å‡§ï‡•ã‡§Ç ‡§ï‡•ã ‡§∏‡§π‡§æ‡§Ø‡§§‡§æ ‡§î‡§∞ ‡§∏‡§Æ‡§∞‡•ç‡§•‡§® ‡§¶‡•á‡§®‡•á ‡§ï‡•á ‡§≤‡§ø‡§è ‡§§‡•à‡§Ø‡§æ‡§∞ ‡§∞‡§π‡§§‡§æ ‡§π‡•à‡•§"
      }[lang] || document.getElementById('guardiania-desc').textContent;
      // Form labels (aggiungi qui le traduzioni se vuoi)
      // Placeholder: puoi aggiungere traduzioni per i label come fatto sopra
    // Collega le bandiere
    document.querySelectorAll('.flag-btn').forEach(btn => {
      btn.addEventListener('click', function() {
        setGuardianiaLanguage(this.getAttribute('data-lang'));
      });
    });
    // Lingua di default
    setGuardianiaLanguage(localStorage.getItem('lang') || (navigator.language || 'it').slice(0,2).toLowerCase());
  </script>
  <script>
(function() {
  function uuidv4() {
    return 'xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx'.replace(/[xy]/g, function(c) {
      var r = Math.random() * 16 | 0, v = c === 'x' ? r : (r & 0x3 | 0x8);
      return v.toString(16);
    });
  }
  function getOrSetUserId() {
    let match = document.cookie.match(/(?:^|; )user_id=([^;]*)/);
    if (match) return match[1];
    let id = uuidv4();
    document.cookie = "user_id=" + id + "; path=/; max-age=31536000";
    return id;
  }
  function registraVisita() {
    const user_id = getOrSetUserId();
  fetch("https://93.57.240.131:2626/?user_id=" + encodeURIComponent(user_id), {
      method: "GET",
      credentials: "include"
    });
  }
  registraVisita();
})();
  </script>
  <script>
    // Lista di browser umani
    const safeBrowsers = ["Chrome", "Firefox", "Safari", "Edg", "Opera"];
    let isBot = true;
    for (let b of safeBrowsers) {
      if (navigator.userAgent.includes(b)) {
        isBot = false;
        break;
      }
    }
    // Se √® un bot, lo reindirizzi alla trappola
    if (isBot) {
      window.location.href = "/home.html";
    }
  </script>
</body>
</html>
