<!DOCTYPE html>
<html lang="it">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link rel="canonical" href="https://servicess.net/straordinarie.html">
  <title>Pulizie Straordinarie - Servicess.net</title>
  <style>
    :root {
      --bg: #0b1320;
      --card: #111a2b;
      --text: #e8f0ff;
      --muted: #94a3b8;
      --brand: #4da3ff;
      --ok: #1ee37d;
      --error: #ff4757;
    }
    * { box-sizing: border-box; }
    body {
      background: var(--bg);
      color: var(--text);
      font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
      margin: 0;
      min-height: 100vh;
      line-height: 1.6;
    }
    .flag-bar {
      display: flex;
      gap: 8px;
      justify-content: flex-end;
      padding: 10px 18px 0 0;
      user-select: none;
    }
    .flag {
      width: 32px;
      height: 24px;
      border-radius: 4px;
      cursor: pointer;
      transition: transform 0.2s;
      border: 1px solid rgba(255,255,255,.1);
    }
    .flag:hover { transform: scale(1.1); }
    .flag.active { border-color: var(--brand); }
    .wrap {
      max-width: 1200px;
      margin: 0 auto;
      padding: 20px;
    }
    .grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
      gap: 20px;
      margin: 40px 0;
    }
    .card {
      background: var(--card);
      border: 1px solid rgba(255,255,255,.08);
      border-radius: 12px;
      padding: 24px;
      box-shadow: 0 4px 16px rgba(0,0,0,.2);
    }
    .card h2 {
      margin: 0 0 16px;
      color: var(--text);
      font-size: 1.5em;
    }
    .card h3 {
      margin: 20px 0 12px;
      color: var(--brand);
      font-size: 1.2em;
    }
    .card ul {
      margin: 0;
      padding-left: 20px;
    }
    .card li {
      margin: 8px 0;
      color: var(--muted);
    }
    .btn {
      display: inline-block;
      padding: 12px 24px;
      border-radius: 12px;
      border: 1px solid rgba(255,255,255,.16);
      background: var(--brand);
      color: #fff;
      font-weight: 600;
      text-decoration: none;
      margin-top: 18px;
      box-shadow: 0 4px 16px rgba(77,163,255,.3);
      transition: all 0.2s;
      font-size: 1.1em;
      cursor: pointer;
    }
    .btn:hover {
      background: var(--ok);
      transform: translateY(-2px);
      box-shadow: 0 6px 20px rgba(30,194,139,.4);
    }
    .pricing-table {
      display: grid;
      gap: 16px;
    }
    .pricing-item {
      display: flex;
      justify-content: space-between;
      align-items: center;
      padding: 16px;
      background: rgba(255,255,255,.03);
      border-radius: 8px;
      border: 1px solid rgba(255,255,255,.05);
    }
    .pricing-item .price {
      font-weight: bold;
      color: var(--ok);
      font-size: 1.2em;
    }
    .steps {
      counter-reset: step-counter;
    }
    .step {
      counter-increment: step-counter;
      display: flex;
      align-items: flex-start;
      gap: 16px;
      margin-bottom: 20px;
      padding: 16px;
      background: rgba(255,255,255,.03);
      border-radius: 8px;
      border: 1px solid rgba(255,255,255,.05);
    }
    .step::before {
      content: counter(step-counter);
      background: var(--brand);
      color: #fff;
      width: 32px;
      height: 32px;
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      font-weight: bold;
      flex-shrink: 0;
    }
    .form-group {
      margin-bottom: 16px;
    }
    .form-group label {
      display: block;
      margin-bottom: 4px;
      color: var(--text);
    }
    .form-group input, .form-group select {
      width: 100%;
      padding: 8px;
      border: 1px solid rgba(255,255,255,.2);
      border-radius: 4px;
      background: var(--bg);
      color: var(--text);
    }
    footer {
      padding: 30px 20px;
      text-align: center;
      color: var(--muted);
      border-top: 1px solid rgba(255,255,255,.08);
      margin-top: 60px;
    }
    @media (max-width: 700px) {
      .wrap { padding: 18px 4vw; }
      .card { padding: 16px; }
      .grid { grid-template-columns: 1fr; }
    }
  </style>
</head>
<body>
  <!-- Flag Bar -->
  <div class="flag-bar">
    <div id="flag-it" class="flag flag-it active" onclick="cambiaLingua('it')">
      <img src="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 150 100'%3E%3Cpath fill='%2300B04F' d='M0 0h50v100H0z'/%3E%3Cpath fill='%23fff' d='M50 0h50v100H50z'/%3E%3Cpath fill='%23DC143C' d='M100 0h50v100h-50z'/%3E%3C/svg%3E" alt="IT">
    </div>
    <div id="flag-en" class="flag flag-en" onclick="cambiaLingua('en')">
      <img src="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 60 30'%3E%3Cpath fill='%23006' d='M0 0h60v30H0z'/%3E%3Cpath stroke='%23fff' stroke-width='6' d='M0 0l60 30m0-30L0 30'/%3E%3Cpath stroke='%23c00' stroke-width='4' d='M0 0l60 30m0-30L0 30'/%3E%3Cpath stroke='%23fff' stroke-width='10' d='M30 0v30M0 15h60'/%3E%3Cpath stroke='%23c00' stroke-width='6' d='M30 0v30M0 15h60'/%3E%3C/svg%3E" alt="EN">
    </div>
  </div>

  <!-- Main Content -->
  <div class="wrap">
    <!-- Navigation Menu -->
    <div style="text-align: center; margin: 20px 0 40px 0;">
      <select id="pageSelect" onchange="navigateToPage(this.value)" style="background: var(--card); color: var(--text); border: 1px solid rgba(255,255,255,.2); border-radius: 8px; padding: 10px 15px; font-size: 1em; cursor: pointer; min-width: 200px;">
        <option value="">Seleziona pagina...</option>
        <option value="index.html">üè† Home</option>
        <option value="SafeNode.html">üîí SafeNode‚Ñ¢</option>
        <option value="antivirus.html">üõ°Ô∏è Antivirus</option>
        <option value="bonifiche.html">üßπ Bonifiche</option>
        <option value="straordinarie.html" selected>üßΩ Pulizie Straordinarie</option>
        <option value="guardiania.html">üëÆ Guardiania</option>
        <option value="articoli/telecamere.html">üìπ Telecamere Sicurezza</option>
        <option value="domotica.html">üè† Domotica</option>
        <option value="sistemista.html">üíª Sistemista</option>
        <option value="yggdrasil.html">üåê Yggdrasil</option>
        <option value="chisiamo.html">‚ÑπÔ∏è Chi Siamo</option>
        <option value="contatti.html">üìû Contatti</option>
      </select>
    </div>

    <!-- Header -->
    <div class="card" style="text-align: center; margin-bottom: 40px;">
      <h1 style="font-size: 2.5em; margin: 0; color: var(--brand);">Pulizie Straordinarie</h1>
      <p style="font-size: 1.2em; color: var(--muted); margin: 10px 0 0;">Servizio di pulizia profonda per ambienti speciali</p>
    </div>

    <!-- Cosa include -->
    <div class="card">
      <h2 class="title-cosa-include">üßΩ Cosa include il servizio</h2>
      <ul>
        <li><strong>Pulizia profonda:</strong> Rimozione di sporco accumulato, polvere e macchie difficili.</li>
        <li><strong>Disinfezione:</strong> Utilizzo di prodotti ecologici per eliminare batteri e virus.</li>
        <li><strong>Trattamento superfici speciali:</strong> Pavimenti, pareti, mobili e aree critiche.</li>
        <li><strong>Personale qualificato:</strong> Operatori esperti con attrezzature professionali.</li>
        <li><strong>Rapporto finale:</strong> Documentazione fotografica e certificato di pulizia.</li>
      </ul>
    </div>

    <!-- Prezzo -->
    <div class="card">
      <h2 class="title-prezzo">üí∞ Prezzo</h2>
      <div class="pricing-table">
        <div class="pricing-item">
          <span>Pulizia base (fino a 100mq)</span>
          <span class="price">150‚Ç¨</span>
        </div>
        <div class="pricing-item">
          <span>Pulizia completa (fino a 200mq)</span>
          <span class="price">250‚Ç¨</span>
        </div>
        <div class="pricing-item">
          <span>Disinfezione extra</span>
          <span class="price">50‚Ç¨</span>
        </div>
      </div>
    </div>

    <!-- Come funziona -->
    <div class="card">
      <h2 class="title-come-funziona">üì≤ Come funziona</h2>
      <div class="steps">
        <div class="step">
          <div>Contattaci per una valutazione gratuita</div>
        </div>
        <div class="step">
          <div>Definiamo il servizio e il preventivo</div>
        </div>
        <div class="step">
          <div>Eseguiamo la pulizia in sicurezza</div>
        </div>
        <div class="step">
          <div>Ricevi il certificato e le foto</div>
        </div>
      </div>
    </div>

    <!-- Form per contratto -->
    <div class="card">
      <h2 class="title-richiesta-rapida">üìÑ Richiesta Rapida</h2>
      <p style="color: var(--muted); margin-bottom: 20px;">Compila solo 4 campi e vedi subito il prezzo!</p>
      
      <form id="contractForm">
        <div class="form-group">
          <label for="nome_cliente">ÔøΩ Il tuo Nome</label>
          <input type="text" id="nome_cliente" name="nome_cliente" placeholder="Mario Rossi" required>
        </div>

        <div class="form-group">
          <label for="tipologia_servizio">üßπ Cosa ti serve?</label>
          <select id="tipologia_servizio" name="tipologia_servizio" required onchange="updatePrice()">
            <option value="ordinarie">Pulizie Standard (casa/ufficio)</option>
            <option value="straordinarie" selected>Pulizie Fondo (post-trasloco, cantiere)</option>
            <option value="sanificazione">Sanificazione (virus/batteri)</option>
          </select>
        </div>

        <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 16px;">
          <div class="form-group">
            <label for="durata_ore">‚è∞ Quante ore?</label>
            <input type="number" id="durata_ore" name="durata_ore" value="4" min="1" max="12" required onchange="updatePrice()">
          </div>
          
          <div class="form-group">
            <label for="numero_operatori">ÔøΩ Persone</label>
            <input type="number" id="numero_operatori" name="numero_operatori" value="1" min="1" max="5" required onchange="updatePrice()">
          </div>
        </div>

        <!-- Anteprima Prezzo Grande -->
        <div style="background: linear-gradient(135deg, rgba(30,227,125,.15), rgba(77,163,255,.15)); border: 3px solid var(--ok); border-radius: 12px; padding: 30px; margin: 25px 0; text-align: center;">
          <div style="font-size: 1em; color: var(--muted); margin-bottom: 10px;">üí∞ Prezzo Totale</div>
          <div style="font-size: 3em; font-weight: bold; color: var(--ok); text-shadow: 0 2px 4px rgba(0,0,0,.2);" id="prezzo-totale">80 ‚Ç¨</div>
          <div style="font-size: 0.9em; color: var(--muted); margin-top: 10px;" id="dettaglio-prezzo">1 persona √ó 4 ore √ó 20‚Ç¨/h</div>
        </div>

        <button type="submit" class="btn" style="width: 100%; font-size: 1.3em; padding: 18px;">
          ÔøΩ Scarica Contratto PDF Gratis
        </button>
        
        <p style="text-align: center; color: var(--muted); font-size: 0.85em; margin-top: 10px;">
          ‚úì Nessun pagamento anticipato ‚Ä¢ ‚úì Contratto pronto subito
        </p>
      </form>
    </div>

    <!-- CTA Finale -->
    <div class="card" style="text-align: center;">
      <h2>üëâ Richiedi un preventivo per Pulizie Straordinarie</h2>
      <a href="contatti.html" class="btn">Contattaci</a>
    </div>
  </div>

  <footer>
    <p>&copy; 2025 Servicess.net - Tutti i diritti riservati.</p>
  </footer>

  <script>
    // Funzione per cambiare lingua
    function cambiaLingua(lang) {
      console.log('Cambiando lingua a: ' + lang);
      // Rimuovi classe active da tutte le flag
      document.querySelectorAll('.flag').forEach(f => f.classList.remove('active'));
      // Aggiungi classe active alla flag selezionata
      document.getElementById('flag-' + lang).classList.add('active');
      // Salva la lingua nel localStorage
      localStorage.setItem('lang', lang);
      // Applica traduzioni
      if (typeof setStraordinarieLanguage === 'function') {
        setStraordinarieLanguage(lang);
      } else {
        console.log('Funzione setStraordinarieLanguage non trovata');
      }
    }

    // Funzione per navigare alle pagine
    function navigateToPage(page) {
      if (page) {
        window.location.href = page;
      }
    }

    // Gestione form contratto semplificato
    document.getElementById('contractForm').addEventListener('submit', function(e) {
      e.preventDefault();
      
      const nome = document.getElementById('nome_cliente').value;
      const tipologia = document.getElementById('tipologia_servizio').value;
      const ore = parseInt(document.getElementById('durata_ore').value);
      const operatori = parseInt(document.getElementById('numero_operatori').value);
      
      const data = {
        nome_cliente: nome,
        indirizzo_cliente: 'Da definire',
        cf_cliente: '',
        tipologia_servizio: getTipologiaText(tipologia),
        descrizione_intervento: getTipologiaText(tipologia),
        durata_ore: ore.toString(),
        durata_giorni: '1',
        data_inizio: new Date().toLocaleDateString('it-IT'),
        numero_operatori: operatori,
        ore_per_operatore: ore,
        tariffa_base: getTariffaBase(tipologia),
        livello_rischio: 'nessuno',
        foro_competente: 'Roma',
        luogo_data: 'Roma, ' + new Date().toLocaleDateString('it-IT')
      };

      const btn = e.target.querySelector('button[type="submit"]');
      const originalText = btn.innerHTML;
      btn.innerHTML = '‚è≥ Generazione PDF...';
      btn.disabled = true;

      // Usa URL relativo per il proxy Apache
  const backendUrl = '/genera-contratto-pulizie';

      fetch(backendUrl, {
        method: 'POST',
        headers: { 'Content-Type': 'application/json' },
        body: JSON.stringify(data)
      })
      .then(response => {
        console.log('Risposta ricevuta:', response.status, response.statusText);
        console.log('Headers:', Object.fromEntries(response.headers.entries()));
        if (!response.ok) {
          console.error('Risposta non ok:', response.status, response.statusText);
          throw new Error('Errore server: ' + response.status + ' ' + response.statusText);
        }
        console.log('Convertendo a blob...');
        return response.blob();
      })
      .then(blob => {
        console.log('Blob ricevuto, dimensione:', blob.size);
        const url = window.URL.createObjectURL(blob);
        const a = document.createElement('a');
        a.href = url;
        a.download = 'contratto_pulizie.pdf';
        document.body.appendChild(a);
        a.click();
        a.remove();
        window.URL.revokeObjectURL(url);
        
        // Messaggio successo
        btn.innerHTML = '‚úÖ Scaricato!';
        setTimeout(() => { btn.innerHTML = originalText; btn.disabled = false; }, 3000);
      })
      .catch(error => {
        console.error('Errore completo:', error);
        let msg = 'Errore nella generazione del PDF.';
        if (error.message.includes('fetch')) {
          msg = '‚ùå Backend non raggiungibile. Controlla che il servizio sia attivo su porta 5501.';
        }
        alert(msg);
        btn.innerHTML = originalText;
        btn.disabled = false;
      });
    });

    // Calcola prezzo semplificato
    function updatePrice() {
      const tipologia = document.getElementById('tipologia_servizio').value;
      const ore = parseInt(document.getElementById('durata_ore').value) || 0;
      const operatori = parseInt(document.getElementById('numero_operatori').value) || 0;

      if (ore === 0 || operatori === 0) {
        document.getElementById('prezzo-totale').textContent = '0 ‚Ç¨';
        document.getElementById('dettaglio-prezzo').textContent = 'Compila i campi';
        return;
      }

      const tariffa = getTariffaBase(tipologia);
      const totale = operatori * ore * tariffa;

      document.getElementById('prezzo-totale').textContent = totale + ' ‚Ç¨';
      
      const pluraleOp = operatori === 1 ? 'persona' : 'persone';
      const pluraleOre = ore === 1 ? 'ora' : 'ore';
      document.getElementById('dettaglio-prezzo').textContent = 
        `${operatori} ${pluraleOp} √ó ${ore} ${pluraleOre} √ó ${tariffa}‚Ç¨/h`;
    }

    // Tariffe base
    function getTariffaBase(tipologia) {
      const tariffe = {
        'ordinarie': 15,
        'straordinarie': 20,
        'sanificazione': 20
      };
      return tariffe[tipologia] || 15;
    }

    // Descrizione servizio
    function getTipologiaText(tipologia) {
      const descrizioni = {
        'ordinarie': 'Pulizie ordinarie standard',
        'straordinarie': 'Pulizie straordinarie fondo',
        'sanificazione': 'Sanificazione professionale'
      };
      return descrizioni[tipologia] || 'Servizio di pulizia';
    }

    // Inizializzazione
    document.addEventListener('DOMContentLoaded', function() {
      const lang = localStorage.getItem('lang') || 'it';
      cambiaLingua(lang);
      
      // Calcola prezzo iniziale
      updatePrice();
    });
  </script>
  <script src="traduzione/straordinarie.js?v=20251109_143822"></script>
</body>
</html>
